<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack | Harry Xiong</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/p128px.ico">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/p128px.ico">
    <meta name="description" content="日拱一卒, 功不唐捐">
    <meta property="og:url" content="https://www.harryxiong24.com/FrontEnd/webpack/webpack.html">
    <meta property="og:site_name" content="Harry Xiong">
    <meta property="og:title" content="Webpack">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh-CN">
    <meta property="og:locale:alternate" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="Harry Xiong">
    <meta property="article:author" content="Harry Xiong">
    <meta property="article:tag" content="Webpack">
    <meta property="article:published_time" content="2020-06-08T16:00:00.000Z">
    <meta name="baidu-site-verification" content="Osv8SVNDzm">
    <meta name="keywords" content="IT, Blog, Internet, sharing, IT skill">
    <meta name="author" content="Harry Xiong">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#46bd87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/p128px.ico">
    <meta name="msapplication-TileColor" content="#ffffff">
    <link rel="preload" href="/assets/css/0.styles.fba0a66d.css" as="style"><link rel="preload" href="/assets/js/app.985acdd6.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.6602fab5.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.325e3bb0.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout.90f03575.js" as="script"><link rel="preload" href="/assets/js/page-Webpack.7a03f5a7.js" as="script"><link rel="prefetch" href="/assets/js/layout-Blog.9086e5b0.js"><link rel="prefetch" href="/assets/js/layout-NotFound.ef539af8.js"><link rel="prefetch" href="/assets/js/page--47edc0ca.bd1e2df1.js"><link rel="prefetch" href="/assets/js/page-1.JavaScript 简介.4865dd7c.js"><link rel="prefetch" href="/assets/js/page-1.Servlet简介.24313a71.js"><link rel="prefetch" href="/assets/js/page-1.Vue简介.3b65cbd2.js"><link rel="prefetch" href="/assets/js/page-1.序言.c2c0cc5d.js"><link rel="prefetch" href="/assets/js/page-1.节点.78f6dce2.js"><link rel="prefetch" href="/assets/js/page-10.JSP.adf36a4a.js"><link rel="prefetch" href="/assets/js/page-10.函数对象.e1425164.js"><link rel="prefetch" href="/assets/js/page-10.拖拽事件.c45441ac.js"><link rel="prefetch" href="/assets/js/page-10.解构赋值.fc1dae8a.js"><link rel="prefetch" href="/assets/js/page-10.过滤器.7c3119f3.js"><link rel="prefetch" href="/assets/js/page-11.JDBC.52a1e1e0.js"><link rel="prefetch" href="/assets/js/page-11.新增运算符.88143ca9.js"><link rel="prefetch" href="/assets/js/page-11.滚轮事件.44e36074.js"><link rel="prefetch" href="/assets/js/page-11.类对象.22c18f69.js"><link rel="prefetch" href="/assets/js/page-11.自定义指令.29841340.js"><link rel="prefetch" href="/assets/js/page-12.JS特殊类实例.9e8a0d8a.js"><link rel="prefetch" href="/assets/js/page-12.异步编程.123b074c.js"><link rel="prefetch" href="/assets/js/page-12.组件.ca021930.js"><link rel="prefetch" href="/assets/js/page-12.键盘事件.5620ed75.js"><link rel="prefetch" href="/assets/js/page-13.BOM.4cc19d0e.js"><link rel="prefetch" href="/assets/js/page-13.Set.c6447da4.js"><link rel="prefetch" href="/assets/js/page-13.正则表达式.e2324f94.js"><link rel="prefetch" href="/assets/js/page-13.组件之间的通信方式.4b0be211.js"><link rel="prefetch" href="/assets/js/page-14.Map.9159134a.js"><link rel="prefetch" href="/assets/js/page-14.Vue-Router.fc7e2d05.js"><link rel="prefetch" href="/assets/js/page-14.定时器.8d7bf7df.js"><link rel="prefetch" href="/assets/js/page-15.Iterator.c49ad764.js"><link rel="prefetch" href="/assets/js/page-15.Set.70a7c119.js"><link rel="prefetch" href="/assets/js/page-15.Vuex.85536341.js"><link rel="prefetch" href="/assets/js/page-16.Map.b3df7396.js"><link rel="prefetch" href="/assets/js/page-16.对象数组更新.158c1f73.js"><link rel="prefetch" href="/assets/js/page-16.异步遍历器.18f3b36c.js"><link rel="prefetch" href="/assets/js/page-17.Mixins.8ab8e5e2.js"><link rel="prefetch" href="/assets/js/page-17.Module.a61a9f1d.js"><link rel="prefetch" href="/assets/js/page-17.Proxy.98bbf74c.js"><link rel="prefetch" href="/assets/js/page-18.Promise.72a74228.js"><link rel="prefetch" href="/assets/js/page-18.Reflect.8f55329c.js"><link rel="prefetch" href="/assets/js/page-18.Vue原码分析.45166ab7.js"><link rel="prefetch" href="/assets/js/page-19.Generator.77999524.js"><link rel="prefetch" href="/assets/js/page-19.Module模块化.27eec4a0.js"><link rel="prefetch" href="/assets/js/page-2.DOM事件.bfe57aac.js"><link rel="prefetch" href="/assets/js/page-2.JS基本操作.a596a85f.js"><link rel="prefetch" href="/assets/js/page-2.Servlet生命周期.bea34c11.js"><link rel="prefetch" href="/assets/js/page-2.Vue实例对象.86e51794.js"><link rel="prefetch" href="/assets/js/page-2.基础关注点.19f84a0f.js"><link rel="prefetch" href="/assets/js/page-20.async.9812438d.js"><link rel="prefetch" href="/assets/js/page-20.模块加载的实现.ba1422bc.js"><link rel="prefetch" href="/assets/js/page-21.DOM.d62eedd1.js"><link rel="prefetch" href="/assets/js/page-21.Iterator.905413df.js"><link rel="prefetch" href="/assets/js/page-22.DOM事件.27d169e8.js"><link rel="prefetch" href="/assets/js/page-22.Proxy.dc548d74.js"><link rel="prefetch" href="/assets/js/page-23.BOM.2cde669e.js"><link rel="prefetch" href="/assets/js/page-23.Reflect.89da90b5.js"><link rel="prefetch" href="/assets/js/page-24.编程风格.61a3d67b.js"><link rel="prefetch" href="/assets/js/page-24.错误处理.7bf7326f.js"><link rel="prefetch" href="/assets/js/page-25.正则表达式.6d99e922.js"><link rel="prefetch" href="/assets/js/page-26.标准对象库.87e73190.js"><link rel="prefetch" href="/assets/js/page-3.DOM查询.52f0ff1c.js"><link rel="prefetch" href="/assets/js/page-3.变量及数据类型.cf27e2c9.js"><link rel="prefetch" href="/assets/js/page-3.基本指令.ff5ca154.js"><link rel="prefetch" href="/assets/js/page-3.数据类型的检验和转换.6ca64e32.js"><link rel="prefetch" href="/assets/js/page-3.表单提交数据.952d182f.js"><link rel="prefetch" href="/assets/js/page-4.元素样式.d26ea206.js"><link rel="prefetch" href="/assets/js/page-4.计算属性与监视.f323b903.js"><link rel="prefetch" href="/assets/js/page-4.请求与响应.92067317.js"><link rel="prefetch" href="/assets/js/page-4.运算符.6ec640f4.js"><link rel="prefetch" href="/assets/js/page-4.错误处理机制.00e19f87.js"><link rel="prefetch" href="/assets/js/page-5.Array.f34ea30e.js"><link rel="prefetch" href="/assets/js/page-5.事件对象.5cbed19e.js"><link rel="prefetch" href="/assets/js/page-5.文件上传.97306aa2.js"><link rel="prefetch" href="/assets/js/page-5.绑定class和style.73275732.js"><link rel="prefetch" href="/assets/js/page-5.逻辑语句.e48d29c1.js"><link rel="prefetch" href="/assets/js/page-6.String.0b746c9e.js"><link rel="prefetch" href="/assets/js/page-6.Vue基本操作.3843fe00.js"><link rel="prefetch" href="/assets/js/page-6.事件的冒泡(Bubble).acbd0614.js"><link rel="prefetch" href="/assets/js/page-6.循环语句.ef127274.js"><link rel="prefetch" href="/assets/js/page-6.网页跳转与重定向.1bb5ff82.js"><link rel="prefetch" href="/assets/js/page-7.Object.f4891e56.js"><link rel="prefetch" href="/assets/js/page-7.一般对象.ee5ecf13.js"><link rel="prefetch" href="/assets/js/page-7.事件的委派.fd133328.js"><link rel="prefetch" href="/assets/js/page-7.会话管理.b6b6c4f5.js"><link rel="prefetch" href="/assets/js/page-7.按键修饰符.00901cbf.js"><link rel="prefetch" href="/assets/js/page-8.Class.f9517e44.js"><link rel="prefetch" href="/assets/js/page-8.ServletContext.9b4acafc.js"><link rel="prefetch" href="/assets/js/page-8.Vue的生命周期.f87fb6b9.js"><link rel="prefetch" href="/assets/js/page-8.事件的绑定.4af4ba10.js"><link rel="prefetch" href="/assets/js/page-8.数组.d9e5a6fc.js"><link rel="prefetch" href="/assets/js/page-9.Symbol.284c94f5.js"><link rel="prefetch" href="/assets/js/page-9.事件的传播.715c8810.js"><link rel="prefetch" href="/assets/js/page-9.字符串方法.5918e90f.js"><link rel="prefetch" href="/assets/js/page-9.过渡与动画.13d05b0e.js"><link rel="prefetch" href="/assets/js/page-9.过滤器.2cbadf3d.js"><link rel="prefetch" href="/assets/js/page-AJAX.0940abf8.js"><link rel="prefetch" href="/assets/js/page-Ajax.48874dd9.js"><link rel="prefetch" href="/assets/js/page-Apache.76b14c33.js"><link rel="prefetch" href="/assets/js/page-ArrayBuffer.bb0986c1.js"><link rel="prefetch" href="/assets/js/page-Bootstrap 之栅格系统.199c058b.js"><link rel="prefetch" href="/assets/js/page-CSS.260e218a.js"><link rel="prefetch" href="/assets/js/page-CentOS 教程.048441fb.js"><link rel="prefetch" href="/assets/js/page-Class 的基本语法.728b90b4.js"><link rel="prefetch" href="/assets/js/page-Class 的继承.5bd42fc1.js"><link rel="prefetch" href="/assets/js/page-DOM Diff 算法.1bebedb3.js"><link rel="prefetch" href="/assets/js/page-DOM&BOM.04cdbad7.js"><link rel="prefetch" href="/assets/js/page-DataStorage.6b75ac61.js"><link rel="prefetch" href="/assets/js/page-ES6 简介.542e8361.js"><link rel="prefetch" href="/assets/js/page-Express.96075332.js"><link rel="prefetch" href="/assets/js/page-Generator 异步应用.d1accaaf.js"><link rel="prefetch" href="/assets/js/page-Generator.d3c1590d.js"><link rel="prefetch" href="/assets/js/page-Git Large File Storage.ebb7eb6a.js"><link rel="prefetch" href="/assets/js/page-Git 安装与配置.e05fe01e.js"><link rel="prefetch" href="/assets/js/page-Git 总体介绍.bd826b0f.js"><link rel="prefetch" href="/assets/js/page-Git 版本库.5c33a163.js"><link rel="prefetch" href="/assets/js/page-Git.213530af.js"><link rel="prefetch" href="/assets/js/page-Github Pages.23d33974.js"><link rel="prefetch" href="/assets/js/page-Github 教程.9a8b08f2.js"><link rel="prefetch" href="/assets/js/page-HTML.2bea0d7b.js"><link rel="prefetch" href="/assets/js/page-HTML进阶.34339966.js"><link rel="prefetch" href="/assets/js/page-Hello TypeScript.c216fd93.js"><link rel="prefetch" href="/assets/js/page-Home.7d3dfab9.js"><link rel="prefetch" href="/assets/js/page-Http 与 Https 介绍.239f742c.js"><link rel="prefetch" href="/assets/js/page-Iterator 和 for...of 循环.048d810f.js"><link rel="prefetch" href="/assets/js/page-JavaScript.247b8622.js"><link rel="prefetch" href="/assets/js/page-Less.e00bdc06.js"><link rel="prefetch" href="/assets/js/page-Linux 命令基本格式.7298b192.js"><link rel="prefetch" href="/assets/js/page-Linux 命令执行过程.16c1952a.js"><link rel="prefetch" href="/assets/js/page-Linux 命令格式.20b18f90.js"><link rel="prefetch" href="/assets/js/page-Linux 和 UNIX.279e726c.js"><link rel="prefetch" href="/assets/js/page-Linux 挂载.17cc7be5.js"><link rel="prefetch" href="/assets/js/page-Linux 文件.d94e62d1.js"><link rel="prefetch" href="/assets/js/page-Linux 文件目录结构.d02d24ab.js"><link rel="prefetch" href="/assets/js/page-Linux 的优点.c8374a44.js"><link rel="prefetch" href="/assets/js/page-Linux 简介.d11b104a.js"><link rel="prefetch" href="/assets/js/page-Linux 系统启动过程.c11232a7.js"><link rel="prefetch" href="/assets/js/page-Linux.6e9cdd25.js"><link rel="prefetch" href="/assets/js/page-Markdown基本语法.6eb8d28a.js"><link rel="prefetch" href="/assets/js/page-Mixin.4a17ffad.js"><link rel="prefetch" href="/assets/js/page-Module 的加载实现.c103eb63.js"><link rel="prefetch" href="/assets/js/page-Module 的语法.b51c89f4.js"><link rel="prefetch" href="/assets/js/page-Nginx.04bf7489.js"><link rel="prefetch" href="/assets/js/page-Promise 对象.dbaa4a46.js"><link rel="prefetch" href="/assets/js/page-Proxy.7dbe6556.js"><link rel="prefetch" href="/assets/js/page-Python 基础.60912d19.js"><link rel="prefetch" href="/assets/js/page-Python 安装.8c5caccf.js"><link rel="prefetch" href="/assets/js/page-Python 快速入门.f680bfd8.js"><link rel="prefetch" href="/assets/js/page-Python 简介.691877c6.js"><link rel="prefetch" href="/assets/js/page-Python 解释器.71a5fc27.js"><link rel="prefetch" href="/assets/js/page-Python 高级语法.8c2c75cc.js"><link rel="prefetch" href="/assets/js/page-Python.13c2aebb.js"><link rel="prefetch" href="/assets/js/page-Reflect.fd2ed38f.js"><link rel="prefetch" href="/assets/js/page-SIMD.7c1ca78d.js"><link rel="prefetch" href="/assets/js/page-Sass.09a25701.js"><link rel="prefetch" href="/assets/js/page-Servlet&JSP.0d470f19.js"><link rel="prefetch" href="/assets/js/page-Set 和 Map 数据结构.02ae2db1.js"><link rel="prefetch" href="/assets/js/page-Symbol.b726d36d.js"><link rel="prefetch" href="/assets/js/page-TypeScript 教程.135ca2a9.js"><link rel="prefetch" href="/assets/js/page-VSCode 安装.b23d8003.js"><link rel="prefetch" href="/assets/js/page-VSCode 快捷键说明.22c5b6e2.js"><link rel="prefetch" href="/assets/js/page-VSCode 扩展使用说明.8ad936fc.js"><link rel="prefetch" href="/assets/js/page-VSCode 推荐配置.245e84e5.js"><link rel="prefetch" href="/assets/js/page-VSCode 的简单介绍.e137b94e.js"><link rel="prefetch" href="/assets/js/page-VSCode.1ea88127.js"><link rel="prefetch" href="/assets/js/page-Virtual Dom.e7daebde.js"><link rel="prefetch" href="/assets/js/page-Vue.f0b6b9e6.js"><link rel="prefetch" href="/assets/js/page-WSL.89b75d1d.js"><link rel="prefetch" href="/assets/js/page-async 函数.897a3803.js"><link rel="prefetch" href="/assets/js/page-dict 和 set.0ee700cb.js"><link rel="prefetch" href="/assets/js/page-dir 相关.0ca9b2a3.js"><link rel="prefetch" href="/assets/js/page-es6 入门.b0cf209b.js"><link rel="prefetch" href="/assets/js/page-filter.9743708b.js"><link rel="prefetch" href="/assets/js/page-jQuery 介绍.043dc7cd.js"><link rel="prefetch" href="/assets/js/page-jQuery.f7422445.js"><link rel="prefetch" href="/assets/js/page-let 和 const 命令.581daea2.js"><link rel="prefetch" href="/assets/js/page-list 和 tuple.9e1e7b2b.js"><link rel="prefetch" href="/assets/js/page-ln 创建链接的深度剖析.37c0efd3.js"><link rel="prefetch" href="/assets/js/page-sorted.da32f373.js"><link rel="prefetch" href="/assets/js/page-ssh.81fe123f.js"><link rel="prefetch" href="/assets/js/page-ubuntu.fc8b6d52.js"><link rel="prefetch" href="/assets/js/page-事件.a973611a.js"><link rel="prefetch" href="/assets/js/page-什么是 TypeScript.b19eb60c.js"><link rel="prefetch" href="/assets/js/page-介绍.811915d4.js"><link rel="prefetch" href="/assets/js/page-代码检查.18c1a49a.js"><link rel="prefetch" href="/assets/js/page-任意值.2c8b7ab5.js"><link rel="prefetch" href="/assets/js/page-信息安全理论与技术.b7858f1b.js"><link rel="prefetch" href="/assets/js/page-修改 DOM 结构.4df2f52f.js"><link rel="prefetch" href="/assets/js/page-修改管理.8ad9e0b2.js"><link rel="prefetch" href="/assets/js/page-修饰器.bb48653f.js"><link rel="prefetch" href="/assets/js/page-元组.d098f384.js"><link rel="prefetch" href="/assets/js/page-其他指令.75eeb637.js"><link rel="prefetch" href="/assets/js/page-其他文件目录相关命令.a01af732.js"><link rel="prefetch" href="/assets/js/page-内置对象.ed98f939.js"><link rel="prefetch" href="/assets/js/page-写在前面.c487ecc3.js"><link rel="prefetch" href="/assets/js/page-写在后面-对 css 预处理的补充.57101482.js"><link rel="prefetch" href="/assets/js/page-写在后面-对H5&CSS的补充.6bed42c0.js"><link rel="prefetch" href="/assets/js/page-函数.30c5ecf7.js"><link rel="prefetch" href="/assets/js/page-函数介绍.4759ac26.js"><link rel="prefetch" href="/assets/js/page-函数式编程.a94e6c2a.js"><link rel="prefetch" href="/assets/js/page-函数的参数.725261ef.js"><link rel="prefetch" href="/assets/js/page-函数的扩展.788ad521.js"><link rel="prefetch" href="/assets/js/page-函数的类型.d2816fcb.js"><link rel="prefetch" href="/assets/js/page-分支管理.467b716b.js"><link rel="prefetch" href="/assets/js/page-切片.37300d16.js"><link rel="prefetch" href="/assets/js/page-列表生成式.85a4f356.js"><link rel="prefetch" href="/assets/js/page-动画.be5188cd.js"><link rel="prefetch" href="/assets/js/page-原始数据类型.4fcbb11e.js"><link rel="prefetch" href="/assets/js/page-参考链接.d921d660.js"><link rel="prefetch" href="/assets/js/page-变量的解构赋值.68d6610f.js"><link rel="prefetch" href="/assets/js/page-基础.bfac3661.js"><link rel="prefetch" href="/assets/js/page-基础介绍.e08549f3.js"><link rel="prefetch" href="/assets/js/page-基础知识.9e81706f.js"><link rel="prefetch" href="/assets/js/page-声明合并.76bc9096.js"><link rel="prefetch" href="/assets/js/page-声明文件.438ae31d.js"><link rel="prefetch" href="/assets/js/page-大前端学习路线.9079cfde.js"><link rel="prefetch" href="/assets/js/page-大后端学习路线.63a4b3e3.js"><link rel="prefetch" href="/assets/js/page-字符串.31657932.js"><link rel="prefetch" href="/assets/js/page-字符串字面量类型.ec61f685.js"><link rel="prefetch" href="/assets/js/page-字符串的扩展.90e6c3b2.js"><link rel="prefetch" href="/assets/js/page-安装 TypeScript.c4765616.js"><link rel="prefetch" href="/assets/js/page-定义函数.fc13f091.js"><link rel="prefetch" href="/assets/js/page-对象的扩展.7b75acd6.js"><link rel="prefetch" href="/assets/js/page-对象的类型——接口.5f6e1e8a.js"><link rel="prefetch" href="/assets/js/page-工作区和暂存区.b93ee7b5.js"><link rel="prefetch" href="/assets/js/page-工程.1ef0217e.js"><link rel="prefetch" href="/assets/js/page-常用快捷键.a324b5bd.js"><link rel="prefetch" href="/assets/js/page-开发软件.3abe398d.js"><link rel="prefetch" href="/assets/js/page-循环.827ac64e.js"><link rel="prefetch" href="/assets/js/page-打开命令行.d56aa371.js"><link rel="prefetch" href="/assets/js/page-扩展.03e5bb77.js"><link rel="prefetch" href="/assets/js/page-扩展阅读.7547f70a.js"><link rel="prefetch" href="/assets/js/page-操作 DOM.d38b2b20.js"><link rel="prefetch" href="/assets/js/page-操作系统.8e79c247.js"><link rel="prefetch" href="/assets/js/page-数值的扩展.7af39b63.js"><link rel="prefetch" href="/assets/js/page-数组的扩展.28d3f7c9.js"><link rel="prefetch" href="/assets/js/page-数组的类型.c3fcab5d.js"><link rel="prefetch" href="/assets/js/page-文件.78075642.js"><link rel="prefetch" href="/assets/js/page-文件名与文件扩展名.257809ef.js"><link rel="prefetch" href="/assets/js/page-文件命令.c976258b.js"><link rel="prefetch" href="/assets/js/page-最新提案.b25bdd5e.js"><link rel="prefetch" href="/assets/js/page-条件判断.845b1e9c.js"><link rel="prefetch" href="/assets/js/page-来自Harry的自述.8c4c85d3.js"><link rel="prefetch" href="/assets/js/page-枚举.9aede12b.js"><link rel="prefetch" href="/assets/js/page-标签管理.6efa4c92.js"><link rel="prefetch" href="/assets/js/page-桌面系统.69f50e13.js"><link rel="prefetch" href="/assets/js/page-正则的扩展.e4ecf1d0.js"><link rel="prefetch" href="/assets/js/page-泛型.0b82c6e0.js"><link rel="prefetch" href="/assets/js/page-浏览器渲染原理及性能优化.4d8e8543.js"><link rel="prefetch" href="/assets/js/page-版本回退.9ad92853.js"><link rel="prefetch" href="/assets/js/page-环境变量.a244557f.js"><link rel="prefetch" href="/assets/js/page-环境变量的添加.4c0fd58f.js"><link rel="prefetch" href="/assets/js/page-生命之歌.53a090af.js"><link rel="prefetch" href="/assets/js/page-生成器.2796c493.js"><link rel="prefetch" href="/assets/js/page-第一个 Python 程序.28f06127.js"><link rel="prefetch" href="/assets/js/page-第七次更新!(1.4.1).79d27843.js"><link rel="prefetch" href="/assets/js/page-第三次更新!(1.1.6).ee66ead5.js"><link rel="prefetch" href="/assets/js/page-第九次更新!(1.4.3).b353ef2b.js"><link rel="prefetch" href="/assets/js/page-第二次更新!(1.0.6).5a506316.js"><link rel="prefetch" href="/assets/js/page-第五次更新!(1.3.1).aa3dcbf5.js"><link rel="prefetch" href="/assets/js/page-第八次更新!(1.4.2).5491b179.js"><link rel="prefetch" href="/assets/js/page-第六次更新!(1.3.4).5a598407.js"><link rel="prefetch" href="/assets/js/page-第十一次更新!(1.4.6).92c7cf50.js"><link rel="prefetch" href="/assets/js/page-第十二次更新!(1.5.8).2464c3b4.js"><link rel="prefetch" href="/assets/js/page-第十次更新!(1.4.4).2e8a62bf.js"><link rel="prefetch" href="/assets/js/page-第四次更新!(1.2.3).aa18e06b.js"><link rel="prefetch" href="/assets/js/page-简介.7e4bb25d.js"><link rel="prefetch" href="/assets/js/page-管理工具.535df5d2.js"><link rel="prefetch" href="/assets/js/page-类.e67448c3.js"><link rel="prefetch" href="/assets/js/page-类与接口.56e89711.js"><link rel="prefetch" href="/assets/js/page-类型别名.e02fc4d2.js"><link rel="prefetch" href="/assets/js/page-类型推论.d95052ec.js"><link rel="prefetch" href="/assets/js/page-类型断言.55dcf8b0.js"><link rel="prefetch" href="/assets/js/page-纵向查看.54039e2a.js"><link rel="prefetch" href="/assets/js/page-练习.107178aa.js"><link rel="prefetch" href="/assets/js/page-编程风格.60c9f419.js"><link rel="prefetch" href="/assets/js/page-网络服务器相关.a2fbb83c.js"><link rel="prefetch" href="/assets/js/page-联合类型.5afe08ef.js"><link rel="prefetch" href="/assets/js/page-联系Harry.dff64e1c.js"><link rel="prefetch" href="/assets/js/page-自定义 Git.cdc59974.js"><link rel="prefetch" href="/assets/js/page-萤火.160667db.js"><link rel="prefetch" href="/assets/js/page-补全.d2dc00af.js"><link rel="prefetch" href="/assets/js/page-计算机编码介绍.98755bfb.js"><link rel="prefetch" href="/assets/js/page-诞生啦!!!(1.0.1).a7c44473.js"><link rel="prefetch" href="/assets/js/page-语言.b30f7078.js"><link rel="prefetch" href="/assets/js/page-语言切换.56ff9e16.js"><link rel="prefetch" href="/assets/js/page-读懂 ECMAScript 规格.0078f895.js"><link rel="prefetch" href="/assets/js/page-调用函数.873d6e65.js"><link rel="prefetch" href="/assets/js/page-输入和输出.e5035cdc.js"><link rel="prefetch" href="/assets/js/page-返回函数.db6c3912.js"><link rel="prefetch" href="/assets/js/page-进阶.87979fe7.js"><link rel="prefetch" href="/assets/js/page-远程仓库.ae529eed.js"><link rel="prefetch" href="/assets/js/page-迭代.a187948a.js"><link rel="prefetch" href="/assets/js/page-迭代器.cbc05534.js"><link rel="prefetch" href="/assets/js/page-选择器.4a534973.js"><link rel="prefetch" href="/assets/js/page-递归函数.59265bcc.js"><link rel="prefetch" href="/assets/js/page-面试题.49e56935.js"><link rel="prefetch" href="/assets/js/page-高阶函数.f2ace53f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fba0a66d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><span class="icon"></span></div> <a href="/" class="home-link router-link-active"><img src="/logo3.png" alt="Harry Xiong" class="logo"> <!----> <span class="site-name can-hide">Harry Xiong</span></a> <div class="links"><div class="color-picker"><span class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg></span> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">主题色:</label> <li><a href="#" class="default-theme"></a></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">主题模式:</label> <div class="darkmode-switch" data-v-5c9e06c7><div class="item day" data-v-5c9e06c7><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon" data-v-5c9e06c7><path d="M512 256a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-85.333334
    0v85.333333a42.666667 42.666667 0 0 0 42.666667 42.666667zM896 469.333333h-85.333333a42.666667
    42.666667 0 0 0 0 85.333334h85.333333a42.666667 42.666667 0 0 0 0-85.333334zM256 512a42.666667
    42.666667 0 0 0-42.666667-42.666667H128a42.666667 42.666667 0 0 0 0 85.333334h85.333333a42.666667
    42.666667 0 0 0 42.666667-42.666667zM265.386667 213.333333a42.666667 42.666667 0 0 0-59.306667
    62.72l61.44 59.306667a42.666667 42.666667 0 0 0 31.146667 11.946667 42.666667 42.666667 0 0 0
    30.72-13.226667 42.666667 42.666667 0 0 0 0-60.16zM725.333333 347.306667a42.666667 42.666667 0 0 0
    29.44-11.946667l61.44-59.306667A42.666667 42.666667 0 0 0 758.613333 213.333333l-61.44
    60.586667a42.666667 42.666667 0 0 0 0 60.16 42.666667 42.666667 0 0 0 28.16 13.226667zM512
    768a42.666667 42.666667 0 0 0-42.666667 42.666667v85.333333a42.666667 42.666667 0 0 0 85.333334
    0v-85.333333a42.666667 42.666667 0 0 0-42.666667-42.666667zM756.48 688.64a42.666667 42.666667 0 0
    0-59.306667 61.44L758.613333 810.666667a42.666667 42.666667 0 0 0 29.44 11.946666 42.666667 42.666667
    0 0 0 30.72-12.8 42.666667 42.666667 0 0 0 0-60.586666zM267.52 688.64l-61.44 59.306667a42.666667
    42.666667 0 0 0 0 60.586666 42.666667 42.666667 0 0 0 30.72 12.8 42.666667 42.666667 0 0 0
    28.586667-10.666666l61.44-59.306667a42.666667 42.666667 0 0 0-59.306667-61.44zM512 341.333333a170.666667
    170.666667 0 1 0 170.666667 170.666667 170.666667 170.666667 0 0 0-170.666667-170.666667z" fill="currentColor"></path></svg></div> <div class="item auto active" data-v-5c9e06c7><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" data-v-5c9e06c7><path d="M460.864 539.072h103.936l-54.208-163.072-49.728 163.072z m411.136-176.704V149.504h-212.352L510.528
    0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504
    149.12-149.504h212.352v-212.928l149.12-149.504-149.184-149.504zM614.464 693.12l-31.616-90.624H438.272l-31.616
    90.624H320.768l144.576-407.68h90.368l144.576 407.68H614.464z m0 0" fill="currentColor"></path></svg></div> <div class="item night" data-v-5c9e06c7><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" data-v-5c9e06c7><path d="M935.538601 630.40178c-11.43005-11.432249-28.673759-14.738607-43.531086-8.353536-46.733115 20.10317-96.362866 30.296859-147.50719 30.296859-99.589478 0-193.221796-38.783705-263.640252-109.20316-108.636744-108.636744-139.609745-270.022125-78.9083-411.148441 6.388069-14.85233 3.078713-32.098837-8.353536-43.532285-11.432249-11.432249-28.675758-14.743604-43.532285-8.354536-52.637312 22.64025-100.017388 54.809439-140.82552 95.616372-85.346135 85.346135-132.346869 198.821199-132.346869 319.519766 0 120.699566 47.001733 234.172631 132.347868 319.518766s198.821199 132.349067 319.517567 132.349067c120.699566 0 234.172431-47.002932 319.520765-132.351066 40.808132-40.810131 72.977122-88.190207 95.615373-140.82552C950.282205 659.081735 946.971849 641.834029 935.538601 630.40178z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont icon-homefill"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随笔" class="dropdown-title"><span class="title"><i class="iconfont icon-note"></i>
      随笔
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="随笔" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-note"></i>
      随笔
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/poem/" class="nav-link"><!---->
  写在前面
</a></li><li class="dropdown-item"><h4>诗集</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/poem/life/" class="nav-link"><i class="iconfont icon-likefill"></i>
  生命之歌
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web前端" class="dropdown-title"><span class="title"><i class="iconfont icon-code"></i>
      web前端
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="web前端" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-code"></i>
      web前端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/FrontEnd/" class="nav-link router-link-active"><!---->
  前端总述
</a></li><li class="dropdown-item"><h4>Basic</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/htmlcss/html.html" class="nav-link"><i class="iconfont icon-html"></i>
  HTML5&amp;CSS&amp;HTML进阶
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/preCSS/sass.html" class="nav-link"><i class="iconfont icon-css"></i>
  Less&amp;Sass&amp;Bootstrap
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/jses/js/" class="nav-link"><i class="iconfont icon-js"></i>
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/jses/es6/" class="nav-link"><i class="iconfont icon-es6"></i>
  ES6
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/DomBom/" class="nav-link"><i class="iconfont icon-nodeJS"></i>
  DOM&amp;BOM
</a></li></ul></li><li class="dropdown-item"><h4>General</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/ajax/Ajax.html" class="nav-link"><i class="iconfont icon-ajax"></i>
  Ajax
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/dataStorage/dataStorage.html" class="nav-link"><i class="iconfont icon-infofill"></i>
  DataStorage
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/webpack/webpack.html" class="nav-link"><i class="iconfont icon-file"></i>
  Webpack
</a></li></ul></li><li class="dropdown-item"><h4>Freewill</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/advancedJS/" class="nav-link"><i class="iconfont icon-js"></i>
  JS-E6进阶
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/typescript/" class="nav-link"><i class="iconfont icon-typescript"></i>
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/Vue/" class="nav-link"><i class="iconfont icon-vue"></i>
  Vue
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/jQuery/" class="nav-link"><i class="iconfont icon-jQuery"></i>
  jQuery
</a></li></ul></li><li class="dropdown-item"><h4>In-depth</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/indepth/Browser.html" class="nav-link"><i class="iconfont icon-chrome"></i>
  浏览器渲染原理与性能优化
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/VirtualDom/" class="nav-link"><i class="iconfont icon-app"></i>
  虚拟DOM与Diff算法
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/indepth/https.html" class="nav-link"><i class="iconfont icon-link"></i>
  Http与Https
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web后台" class="dropdown-title"><span class="title"><i class="iconfont icon-backstage"></i>
      Web后台
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Web后台" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-backstage"></i>
      Web后台
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BackEnd/" class="nav-link"><!---->
  后台总述
</a></li><li class="dropdown-item"><h4>NodeJS搭建后台</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tip.html" class="nav-link"><!---->
  NodeJS
</a></li><li class="dropdown-subitem"><a href="/tip.html" class="nav-link"><!---->
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/tip.html" class="nav-link"><!---->
  Koa
</a></li><li class="dropdown-subitem"><a href="/BackEnd/express/express.html" class="nav-link"><!---->
  Express
</a></li></ul></li><li class="dropdown-item"><h4>Servlet专栏</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BackEnd/Servlet/" class="nav-link"><!---->
  Servlet&amp;JSP
</a></li></ul></li><li class="dropdown-item"><h4>Python专栏</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BackEnd/python/" class="nav-link"><!---->
  Python
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT知识" class="dropdown-title"><span class="title"><i class="iconfont icon-computer"></i>
      IT知识
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="IT知识" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-computer"></i>
      IT知识
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer/basic/" class="nav-link"><i class="iconfont icon-file"></i>
  计算机基础
</a></li><li class="dropdown-item"><!----> <a href="/computer/Markdown/Markdown.html" class="nav-link"><i class="iconfont icon-markdown"></i>
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/computer/InformationSecurity/InformationSecurity.html" class="nav-link"><i class="iconfont icon-infofill"></i>
  信息安全理论与技术
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用工具" class="dropdown-title"><span class="title"><i class="iconfont icon-software"></i>
      常用软件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="常用工具" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-software"></i>
      常用软件
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link"><i class="iconfont icon-git"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/vscode/" class="nav-link"><i class="iconfont icon-vscode"></i>
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/tools/windows/" class="nav-link"><i class="iconfont icon-windows"></i>
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/tools/linux/" class="nav-link"><i class="iconfont icon-app"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/tools/apache/apache.html" class="nav-link"><i class="iconfont icon-Apache"></i>
  Apache
</a></li><li class="dropdown-item"><!----> <a href="/tools/nginx/nginx.html" class="nav-link"><i class="iconfont icon-nginx"></i>
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title"><!---->
      更多
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title"><!---->
      更多
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notice/T12.html" class="nav-link"><!---->
  公告
</a></li><li class="dropdown-item"><!----> <a href="/more/friend.html" class="nav-link"><!---->
  站友推荐
</a></li><li class="dropdown-item"><!----> <a href="/profile/info.html" class="nav-link"><!---->
  Harry自述
</a></li><li class="dropdown-item"><!----> <a href="/profile/contact.html" class="nav-link"><!---->
  联系Harry
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title"><!---->
      选择语言
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title"><!---->
      选择语言
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/" class="nav-link"><!---->
  English
</a></li><li class="dropdown-item"><!----> <a href="/FrontEnd/webpack/webpack/" aria-current="page" class="nav-link router-link-exact-active router-link-active"><!---->
  简体中文
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div class="blogger-info mobile"><div class="blogger-wrapper"><div class="blogger hasIntro"><img alt="blogger-avatar" src="/logo3.png" class="avatar"> <div class="name">Harry Xiong</div></div></div> <div class="num-wrapper"><div><div>文章</div> <div class="num">298</div></div> <div><div>分类</div> <div class="num">14</div></div> <div><div>标签</div> <div class="num">62</div></div></div></div> <hr>  <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont icon-homefill"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随笔" class="dropdown-title"><span class="title"><i class="iconfont icon-note"></i>
      随笔
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="随笔" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-note"></i>
      随笔
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/poem/" class="nav-link"><!---->
  写在前面
</a></li><li class="dropdown-item"><h4>诗集</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/poem/life/" class="nav-link"><i class="iconfont icon-likefill"></i>
  生命之歌
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="web前端" class="dropdown-title"><span class="title"><i class="iconfont icon-code"></i>
      web前端
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="web前端" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-code"></i>
      web前端
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/FrontEnd/" class="nav-link router-link-active"><!---->
  前端总述
</a></li><li class="dropdown-item"><h4>Basic</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/htmlcss/html.html" class="nav-link"><i class="iconfont icon-html"></i>
  HTML5&amp;CSS&amp;HTML进阶
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/preCSS/sass.html" class="nav-link"><i class="iconfont icon-css"></i>
  Less&amp;Sass&amp;Bootstrap
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/jses/js/" class="nav-link"><i class="iconfont icon-js"></i>
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/jses/es6/" class="nav-link"><i class="iconfont icon-es6"></i>
  ES6
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/DomBom/" class="nav-link"><i class="iconfont icon-nodeJS"></i>
  DOM&amp;BOM
</a></li></ul></li><li class="dropdown-item"><h4>General</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/ajax/Ajax.html" class="nav-link"><i class="iconfont icon-ajax"></i>
  Ajax
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/dataStorage/dataStorage.html" class="nav-link"><i class="iconfont icon-infofill"></i>
  DataStorage
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/webpack/webpack.html" class="nav-link"><i class="iconfont icon-file"></i>
  Webpack
</a></li></ul></li><li class="dropdown-item"><h4>Freewill</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/advancedJS/" class="nav-link"><i class="iconfont icon-js"></i>
  JS-E6进阶
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/typescript/" class="nav-link"><i class="iconfont icon-typescript"></i>
  TypeScript
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/Vue/" class="nav-link"><i class="iconfont icon-vue"></i>
  Vue
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/jQuery/" class="nav-link"><i class="iconfont icon-jQuery"></i>
  jQuery
</a></li></ul></li><li class="dropdown-item"><h4>In-depth</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/FrontEnd/indepth/Browser.html" class="nav-link"><i class="iconfont icon-chrome"></i>
  浏览器渲染原理与性能优化
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/VirtualDom/" class="nav-link"><i class="iconfont icon-app"></i>
  虚拟DOM与Diff算法
</a></li><li class="dropdown-subitem"><a href="/FrontEnd/indepth/https.html" class="nav-link"><i class="iconfont icon-link"></i>
  Http与Https
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web后台" class="dropdown-title"><span class="title"><i class="iconfont icon-backstage"></i>
      Web后台
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Web后台" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-backstage"></i>
      Web后台
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/BackEnd/" class="nav-link"><!---->
  后台总述
</a></li><li class="dropdown-item"><h4>NodeJS搭建后台</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/tip.html" class="nav-link"><!---->
  NodeJS
</a></li><li class="dropdown-subitem"><a href="/tip.html" class="nav-link"><!---->
  MongoDB
</a></li><li class="dropdown-subitem"><a href="/tip.html" class="nav-link"><!---->
  Koa
</a></li><li class="dropdown-subitem"><a href="/BackEnd/express/express.html" class="nav-link"><!---->
  Express
</a></li></ul></li><li class="dropdown-item"><h4>Servlet专栏</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BackEnd/Servlet/" class="nav-link"><!---->
  Servlet&amp;JSP
</a></li></ul></li><li class="dropdown-item"><h4>Python专栏</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/BackEnd/python/" class="nav-link"><!---->
  Python
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IT知识" class="dropdown-title"><span class="title"><i class="iconfont icon-computer"></i>
      IT知识
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="IT知识" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-computer"></i>
      IT知识
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/computer/basic/" class="nav-link"><i class="iconfont icon-file"></i>
  计算机基础
</a></li><li class="dropdown-item"><!----> <a href="/computer/Markdown/Markdown.html" class="nav-link"><i class="iconfont icon-markdown"></i>
  Markdown
</a></li><li class="dropdown-item"><!----> <a href="/computer/InformationSecurity/InformationSecurity.html" class="nav-link"><i class="iconfont icon-infofill"></i>
  信息安全理论与技术
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用工具" class="dropdown-title"><span class="title"><i class="iconfont icon-software"></i>
      常用软件
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="常用工具" class="mobile-dropdown-title"><span class="title"><i class="iconfont icon-software"></i>
      常用软件
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/git/" class="nav-link"><i class="iconfont icon-git"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/vscode/" class="nav-link"><i class="iconfont icon-vscode"></i>
  VSCode
</a></li><li class="dropdown-item"><!----> <a href="/tools/windows/" class="nav-link"><i class="iconfont icon-windows"></i>
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/tools/linux/" class="nav-link"><i class="iconfont icon-app"></i>
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/tools/apache/apache.html" class="nav-link"><i class="iconfont icon-Apache"></i>
  Apache
</a></li><li class="dropdown-item"><!----> <a href="/tools/nginx/nginx.html" class="nav-link"><i class="iconfont icon-nginx"></i>
  Nginx
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title"><!---->
      更多
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title"><!---->
      更多
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notice/T12.html" class="nav-link"><!---->
  公告
</a></li><li class="dropdown-item"><!----> <a href="/more/friend.html" class="nav-link"><!---->
  站友推荐
</a></li><li class="dropdown-item"><!----> <a href="/profile/info.html" class="nav-link"><!---->
  Harry自述
</a></li><li class="dropdown-item"><!----> <a href="/profile/contact.html" class="nav-link"><!---->
  联系Harry
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title"><!---->
      选择语言
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title"><!---->
      选择语言
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/" class="nav-link"><!---->
  English
</a></li><li class="dropdown-item"><!----> <a href="/FrontEnd/webpack/webpack/" aria-current="page" class="nav-link router-link-exact-active router-link-active"><!---->
  简体中文
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/FrontEnd/webpack/webpack/" aria-current="page" class="active sidebar-link"><i class="iconfont icon-Webpack" style="margin-right:0.2em;"></i>Webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_1-webpack简介" class="sidebar-link">1. webpack简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_1-1-webpack" class="sidebar-link">1.1 Webpack</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_1-2-webpack-五个核心概念" class="sidebar-link">1.2 webpack 五个核心概念</a></li></ul></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_2-使用-webpack" class="sidebar-link">2. 使用 Webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_2-1-安装" class="sidebar-link">2.1 安装</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_2-2-编译打包应用" class="sidebar-link">2.2 编译打包应用</a></li></ul></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-配置-webpack" class="sidebar-link">3. 配置 Webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-1-运行打包命令" class="sidebar-link">3.1 运行打包命令</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-2-基础配置" class="sidebar-link">3.2 基础配置</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-3-本地服务" class="sidebar-link">3.3 本地服务</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-4-支持模板-html" class="sidebar-link">3.4 支持模板 html</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-5-样式处理" class="sidebar-link">3.5 样式处理</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-6-高级-js-转换-es5" class="sidebar-link">3.6 高级 js 转换 ES5</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-7-语法校验" class="sidebar-link">3.7 语法校验</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-8-全局变量引入" class="sidebar-link">3.8 全局变量引入</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-9-图片处理" class="sidebar-link">3.9 图片处理</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_3-10-打包其他资源" class="sidebar-link">3.10 打包其他资源</a></li></ul></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-webpack-性能优化" class="sidebar-link">4. webpack 性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-1-hmr" class="sidebar-link">4.1 HMR</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-2-source-map" class="sidebar-link">4.2 source-map</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-3-oneof" class="sidebar-link">4.3 oneof</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-4-缓存" class="sidebar-link">4.4 缓存</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-5-tree-shaking" class="sidebar-link">4.5 tree shaking</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-6-代码分割" class="sidebar-link">4.6 代码分割</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-7-懒加载与预加载" class="sidebar-link">4.7 懒加载与预加载</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-8-pwa（离线可访问）" class="sidebar-link">4.8 PWA（离线可访问）</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-9-多进程打包" class="sidebar-link">4.9 多进程打包</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-10-externals" class="sidebar-link">4.10 externals</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_4-11-dll" class="sidebar-link">4.11 dll</a></li></ul></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_5-配置详解" class="sidebar-link">5. 配置详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_5-1-entry" class="sidebar-link">5.1 entry</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_5-2-output" class="sidebar-link">5.2 output</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_5-3-module" class="sidebar-link">5.3 module</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_5-4-resolve" class="sidebar-link">5.4 resolve</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_5-5-devserver" class="sidebar-link">5.5 devServer</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_5-6-optimization" class="sidebar-link">5.6 optimization</a></li></ul></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_6-webpack-配置模板" class="sidebar-link">6. webpack 配置模板</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_6-1-基本模板" class="sidebar-link">6.1 基本模板</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_6-2-开发环境的基本配置" class="sidebar-link">6.2 开发环境的基本配置</a></li><li class="sidebar-sub-header"><a href="/FrontEnd/webpack/webpack/#_6-3-生产环境的配置" class="sidebar-link">6.3 生产环境的配置</a></li></ul></li></ul></li></ul> </aside> <main class="page"><nav class="breadcrumb"><ul><li><a class="iconfont icon-infofill">大前端学习路线</a></li><li class="is-active"><a class="iconfont icon-Webpack">Webpack</a></li></ul></nav>  <div class="page-title"><h1>Webpack</h1> <div class="page-info"><span><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8
        57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8
        22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span>Harry Xiong</span></span><span class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-0.992-10.592-1.28-11.136-0.192-2.88-1.152-8.064-2.08-10.816-0.256-0.672-0.544-1.376-0.832-2.08-0.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160 316.928 160 126.368
          290.016 38.24 482.592c-1.056 2.112-1.792 4.096-2.272 5.856-0.224 0.544-0.448 1.088-0.64
          1.6-1.76 5.088-1.792 8.64-1.632 7.744-0.832 3.744-1.568 11.168-1.568 11.168-0.224 2.272-0.224
          4.032 0.032 6.304 0 0 0.736 6.464 1.088 7.808 0.128 1.824 0.576 4.512 1.12 6.976l-0.032 0c0.448
          2.08 1.12 4.096 1.984 6.08 0.48 1.536 0.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512
          864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912 0.256-0.608
          0.48-1.184 0.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32 0 0 0 0-0.032 0.032C991.04 522.272 992
          517.632 992 512.096zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160
          160S600.224 672 512 672z" fill="currentColor"></path></svg> <span id="/FrontEnd/webpack/webpack/" data-flag-title="Webpack" class="leancloud_visitors"><span class="leancloud-visitors-count">...</span></span></span><span class="time-info"><svg viewBox="0 0 1030 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.40077995 110.13681607c0-18.75236523-14.72060643-33.47297166-33.47297166-33.47297166-18.75236523 0-33.47297166 14.72060643-33.47297167 33.47297166v33.47297166h66.99282432v-33.47297166zM381.5304192 110.13681607c0-18.75236523-14.72060643-33.47297166-33.47297166-33.47297166s-33.51985266 14.72060643-33.51985266 33.47297166v33.47297166h66.99282432v-33.47297166zM850.33954759 143.65666873h-133.93876764v100.46579598c0 18.75236523-14.72060643 33.47297166-33.47297166 33.47297166a33.14480583 33.14480583 0 0 1-33.47297167-33.47297166V143.65666873H381.5304192v100.46579598c0 18.75236523-14.72060643 33.47297166-33.47297166 33.47297166a33.14480583 33.14480583 0 0 1-33.47297167-33.47297166V143.65666873H180.59882723A134.31381561 134.31381561 0 0 0 46.66005959 277.59543637v535.75507058a134.31381561 134.31381561 0 0 0 133.93876764 133.93876878h669.74072036a134.36069547 134.36069547 0 0 0 133.93876764-133.93876878V277.59543637a134.31381561 134.31381561 0 0 0-133.93876764-133.93876764z m33.47297166 267.87753529H147.12585557a33.14480583 33.14480583 0 0 1-33.47297166-33.47297167c0-18.75236523 14.72060643-33.47297166 33.47297166-33.47297166h736.68666368c18.75236523 0 33.47297166 14.72060643 33.47297166 33.47297166a33.14480583 33.14480583 0 0 1-33.47297166 33.47297167z" fill="currentColor"></path></svg> <span>2020-6-9</span></span><span class="category-info active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.410098 106.99178l282.175661 0c22.26305 0 40.311101 18.048051 40.311101 40.311101l0
    282.175661c0 22.26305-18.048051 40.311101-40.311101 40.311101L148.410098 469.789643c-22.26305
    0-40.311101-18.048051-40.311101-40.311101L108.098997 147.301857C108.098997 125.038808 126.147048
    106.99178 148.410098 106.99178z" fill="currentColor"></path> <path d="M147.555637 553.47767 429.731298 553.47767c22.26305 0 40.311101 18.048051 40.311101 40.311101l0
    282.175661c0 22.26305-18.048051 40.311101-40.311101 40.311101L147.555637 916.275533c-22.26305
    0-40.311101-18.048051-40.311101-40.311101L107.244536 593.788771C107.24556 571.525722 125.292588
    553.47767 147.555637 553.47767z" fill="currentColor"></path> <path d="M593.926918 106.99178l282.175661 0c22.26305 0 40.311101 18.048051 40.311101 40.311101l0
    282.175661c0 22.26305-18.048051 40.311101-40.311101 40.311101L593.926918 469.789643c-22.26305
    0-40.311101-18.048051-40.311101-40.311101L553.615816 147.301857C553.615816 125.038808 571.663868
    106.99178 593.926918 106.99178z" fill="currentColor"></path> <path d="M730.220047 920.501788 623.926162 920.501788c-40.925085 0-74.220399-33.387411-74.220399-74.42506L549.705763 623.991654c0-41.037648 33.387411-74.424037 74.42506-74.424037l222.085074 0c41.037648
    0 74.424037 33.226752 74.424037 74.066903L920.639934 737.868237c0 10.243295-8.30413
    18.547425-18.547425 18.547425s-18.547425-8.30413-18.547425-18.547425L883.545084
    623.63452c0-20.387329-16.746406-36.973076-37.33021-36.973076L624.130823 586.661444c-20.584827
    0-37.331233 16.746406-37.331233 37.33021l0 222.085074c0 20.584827 16.654308 37.331233 37.126572
    37.331233l106.293885 0c10.243295 0 18.547425 8.30413 18.547425 18.547425C748.766448 912.198681
    740.463342 920.501788 730.220047 920.501788z" fill="currentColor"></path></svg> <span>Web前端</span></span><span><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.90178584 458.5625l-29.73214336-313.99553584c-1.50669667-16.27232168-14.46428584-29.12946416-30.73660664-30.73660664L565.4375 84.09821416h-0.40178584c-3.21428584 0-5.72544668 1.00446416-7.63392832 2.91294668L87.01116084
    557.40178584a10.00446416 10.00446416 0 0 0 0 14.16294668l365.42410664 365.42410664c1.90848252
    1.90848252 4.41964248 2.91294667 7.13169668 2.91294668s5.22321416-1.00446416
    7.13169668-2.91294668l470.390625-470.390625c2.00892833-2.109375 3.01339248-5.02232168
    2.8125-8.03571416zM699.83482168 386.44196416c-35.45758916
    0-64.28571416-28.828125-64.28571416-64.28571416s28.828125-64.28571416 64.28571416-64.28571416
    64.28571416 28.828125 64.28571416 64.28571416-28.828125 64.28571416-64.28571417 64.28571416z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0">Webpack</li></ul></span><span class="read-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon time-icon"><path d="M511.99730176 70.56849042c-243.79770498 0-441.42881133 197.63290459-441.42881133 441.43420783 0 243.79770498 197.63110635 441.42881133 441.42881133 441.42881132s441.43420781-197.63110635 441.43420781-441.42881133C953.43150958 268.20589238 755.79500674 70.56849042 511.99730176 70.56849042L511.99730176 70.56849042zM662.15499453 679.66072578l-15.60531972 15.60981623c-8.62065527 8.61525878-22.59538066 8.61525878-31.21513594-2e-8L472.19658682 552.12629434c-4.95024346-4.94394786-4.33955742-14.88850576-4.33955742-24.67746827L467.85702852 247.14037461c0-12.18943565 9.8816001-22.07013662 22.07013661-22.07013662l22.07013663 0c12.18943565 0 22.07013662 9.8816001 22.07013662 22.07013662l0 273.2176582 128.08755703 128.08755704C670.77564981 657.06534599 670.77564981 671.04097051 662.15499453 679.66072578L662.15499453 679.66072578zM662.15499453 679.66072578" fill="currentColor"></path></svg> <span>大约 46 分钟</span></span></div></div> <!----> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> Webpack</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-webpack-简介">1. webpack简介</a><ul><li><a href="#_1-1-webpack">1.1 Webpack</a></li><li><a href="#_1-2-webpack-五个核心概念">1.2 webpack 五个核心概念</a></li></ul></li><li><a href="#_2-使用-webpack">2. 使用 Webpack</a><ul><li><a href="#_2-1-安装">2.1 安装</a></li><li><a href="#_2-2-编译打包应用">2.2 编译打包应用</a></li></ul></li><li><a href="#_3-配置-webpack">3. 配置 Webpack</a><ul><li><a href="#_3-1-运行打包命令">3.1 运行打包命令</a></li><li><a href="#_3-2-基础配置">3.2 基础配置</a></li><li><a href="#_3-3-本地服务">3.3 本地服务</a></li><li><a href="#_3-4-支持模板-html">3.4 支持模板 html</a></li><li><a href="#_3-5-样式处理">3.5 样式处理</a></li><li><a href="#_3-6-高级-js-转换-es5">3.6 高级 js 转换 ES5</a></li><li><a href="#_3-7-语法校验">3.7 语法校验</a></li><li><a href="#_3-8-全局变量引入">3.8 全局变量引入</a></li><li><a href="#_3-9-图片处理">3.9 图片处理</a></li><li><a href="#_3-10-打包其他资源">3.10 打包其他资源</a></li></ul></li><li><a href="#_4-webpack-性能优化">4. webpack 性能优化</a><ul><li><a href="#_4-1-hmr">4.1 HMR</a></li><li><a href="#_4-2-source-map">4.2 source-map</a></li><li><a href="#_4-3-oneof">4.3 oneof</a></li><li><a href="#_4-4-缓存">4.4 缓存</a></li><li><a href="#_4-5-tree-shaking">4.5 tree shaking</a></li><li><a href="#_4-6-代码分割">4.6 代码分割</a></li><li><a href="#_4-7-懒加载与预加载">4.7 懒加载与预加载</a></li><li><a href="#_4-8-pwa（离线可访问）">4.8 PWA（离线可访问）</a></li><li><a href="#_4-9-多进程打包">4.9 多进程打包</a></li><li><a href="#_4-10-externals">4.10 externals</a></li><li><a href="#_4-11-dll">4.11 dll</a></li></ul></li><li><a href="#_5-配置详解">5. 配置详解</a><ul><li><a href="#_5-1-entry">5.1 entry</a></li><li><a href="#_5-2-output">5.2 output</a></li><li><a href="#_5-3-module">5.3 module</a></li><li><a href="#_5-4-resolve">5.4 resolve</a></li><li><a href="#_5-5-devserver">5.5 devServer</a></li><li><a href="#_5-6-optimization">5.6 optimization</a></li></ul></li><li><a href="#_6-webpack-配置模板">6. webpack 配置模板</a><ul><li><a href="#_6-1-基本模板">6.1 基本模板</a></li><li><a href="#_6-2-开发环境的基本配置">6.2 开发环境的基本配置</a></li><li><a href="#_6-3-生产环境的配置">6.3 生产环境的配置</a></li></ul></li></ul></div><p></p> <h2 id="_1-webpack简介"><a href="#_1-webpack简介" class="header-anchor">#</a> 1. <strong>webpack</strong>简介</h2> <h3 id="_1-1-webpack"><a href="#_1-1-webpack" class="header-anchor">#</a> 1.1 Webpack</h3> <p>webpack 是一种前端资源构建工具，一个静态模块打包器(module bundler)。</p> <p>在 webpack 看来, 前端的所有资源文件(js/json/css/img/less/...)都会作为模块处理。</p> <p>它将根据模块的依赖关系进行静态分析，打包生成对应的静态资源(bundle)。</p> <h3 id="_1-2-webpack-五个核心概念"><a href="#_1-2-webpack-五个核心概念" class="header-anchor">#</a> 1.2 webpack 五个核心概念</h3> <p><strong>1.2.1 Entry</strong></p> <p>入口(Entry)指示 webpack 以哪个文件为入口起点开始打包，分析构建内部依赖图。</p> <p><strong>1.2.2 Output</strong></p> <p>输出(Output)指示 webpack 打包后的资源 bundles 输出到哪里去，以及如何命名。</p> <p><strong>1.2.3 Loader</strong></p> <p>Loader 让 webpack 能够去处理那些非 JavaScript 文件 (webpack 自身只理解 JavaScript)</p> <p><strong>1.2.4 Plugins</strong></p> <p>插件(Plugins)可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量等。</p> <p><strong>1.2.5 Mode</strong></p> <p>模式(Mode)指示 webpack 使用相应模式的配置。</p> <table><thead><tr><th>选项</th> <th>描述</th> <th>特点</th></tr></thead> <tbody><tr><td>development</td> <td>会将 DefinePlugin 中 process.env.NODE_ENV 的值设置为 development。启用 NamedChunksPlugin 和 NamedModulesPlugin。</td> <td>能让代码本地调试运行的环境</td></tr> <tr><td>production</td> <td>会将 DefinePlugin 中 process.env.NODE_ENV 的值设置为 production。启用 FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, ModuleConcatenationPlugin, NoEmitOnErrorsPlugin, OccurrenceOrderPlugin, SideEffectsFlagPlugin 和 TerserPlugin。</td> <td>能让代码优化上线运行的环境</td></tr></tbody></table> <h2 id="_2-使用-webpack"><a href="#_2-使用-webpack" class="header-anchor">#</a> 2. 使用 Webpack</h2> <h3 id="_2-1-安装"><a href="#_2-1-安装" class="header-anchor">#</a> 2.1 安装</h3> <p><strong>webpack 可以在项目中进行本地的安装，也可以进行全局的安装，一般我们都是使用本地安装的 webpack</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 先初始化项目</span>
<span class="token function">npm</span> init -y
<span class="token comment"># 本地安装，webpack4.x中需要同时安装webpack和webpack-cli</span>
<span class="token function">npm</span> i webpack webpack-cli -D

<span class="token comment"># 项目根目录自行创建webpack.config.js文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>**注：**webpack 可以进行零配置，也就是说安装好之后就可以直接进行打包命令，使用<code>npx webpack</code>就可以直接让 webpack 进行打包了，默认会找到根目录下的<code>src</code>目录下的<code>index.js</code>进行打包（默认只支持 js 模块），打包后会生成一个<code>dist</code>目录,打包后的 js 文件会整合到一个<code>main.js</code>文件中</p> <h3 id="_2-2-编译打包应用"><a href="#_2-2-编译打包应用" class="header-anchor">#</a> 2.2 编译打包应用</h3> <ol><li><p>创建文件</p></li> <li><p>运行指令</p> <p><strong>开发环境指令</strong>：webpack src/js/index.js -o build/js/built.js --mode=development</p> <p><strong>功能</strong>：webpack 能够编译打包 js 和 json 文件，并且能将 es6 的模块化语法转换成浏览器能识别的语法。</p> <p><strong>生产环境指令</strong>：webpack src/js/index.js -o build/js/built.js --mode=production</p> <p><strong>功能</strong>：在开发配置功能上多一个功能，压缩代码。</p></li> <li><p>结论</p> <p>webpack 能够编译打包 js 和 json 文件。</p> <p>能将 es6 的模块化语法转换成浏览器能识别的语法。能压缩代码。</p></li> <li><p>问题</p> <p>不能编译打包 css、img 等文件。不能将 js 的 es6 基本语法转化为 es5 以下语法。</p></li></ol> <h2 id="_3-配置-webpack"><a href="#_3-配置-webpack" class="header-anchor">#</a> 3. 配置 Webpack</h2> <p>webpack 默认的零配置功能很弱，所以大多数时候都是需要我们手动进行配置</p> <h3 id="_3-1-运行打包命令"><a href="#_3-1-运行打包命令" class="header-anchor">#</a> 3.1 运行打包命令</h3> <p><strong>在 webpack 中默认的配置文件是<code>webpack.config.js</code>或者是<code>webpackfile.js</code>，一般情况下会选择前者</strong>。</p> <p>当然，<strong>我们也可以手动控制 webpack 执行自定义命名的配置文件</strong></p> <p>使用<code>npx webpack --config</code>自定义的配置文件名就能手动控制 webpack 找到对应的配置文件</p> <p><strong>一般情况下，我们打包都是通过<code>npm run bulid</code>这样的方法进行配置的，这种就需要在<code>package.json</code>中自己配置自定义脚本了，在下面的<code>scripts</code>中配置脚本</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.config.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.39.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.3.6&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>注：</strong></p> <ul><li><p><strong>在自定义的脚本中运行 webpack 的指令前面后面写参数就不需要加上<code>npx</code>了</strong></p></li> <li><p>也可以直接只在 build 后面写一个 webpack，在打包的时候传入参数就行了（不过一般我们不会这么做），不过不能普通地进行拼接，还需要在<code>npm run build</code>后面加上两个<code>--</code>才能正常传参，<strong>如<code>npm run build --config webpack.config.js</code></strong>，不然 npm 并不会认为后面传的东西是一个参数</p></li></ul> <h3 id="_3-2-基础配置"><a href="#_3-2-基础配置" class="header-anchor">#</a> 3.2 基础配置</h3> <h4 id="_3-2-1-一般配置"><a href="#_3-2-1-一般配置" class="header-anchor">#</a> 3.2.1 一般配置</h4> <p><strong>webpack 是 node 写出来的，所以我们需要使用 node 的语法来进行配置</strong>，下面是 webpack 的基本配置，仅能够对 js 文件进行打包</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>

<span class="token comment">// node内置核心模块，用来处理路径问题。</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 开始配置</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">/**
   * mode是打包后的模式，默认有两种，production和development
   * production模式会压缩代码，是生产环境后打包的
   * 而development不会压缩代码，便于开发者观察打包后的结果
   */</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 这个模式只对压缩的js文件有效</span>

  entry<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包程序的入口</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;main.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包后的文件名</span>
    <span class="token comment">/**
     * filename: 'main.[hash].js'，生成hash文件名，写成这种方式可以防止覆盖和缓存，每次生成的文件都不一样
     * filename: 'main.[hash:8].js'// 生成8位的hash文件名
     */</span>

    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 打包后的路径，注意，该路径必须是绝对路径
     * path.resolve方法会将生成的文件路径拼接成一个绝对路径，该路径默认是以整个系统盘为路径的
     * 可以在前面加一个__dirname参数改变成以当前根目录为绝对路径
     */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><strong>webpack 中三种三种 hash 值区别：<a href="https://www.cnblogs.com/giggle/p/9583940.html" target="_blank" rel="noopener noreferrer">webpack 三种哈希区别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <h4 id="_3-2-1-简单打包后的文件"><a href="#_3-2-1-简单打包后的文件" class="header-anchor">#</a> 3.2.1 简单打包后的文件</h4> <p><strong>这个如果不想了解原理可略过</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">modules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// webpackBootstrap</span>
  <span class="token comment">// The module cache 先定义一个缓存</span>
  <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// The require function 配置实现了require函数</span>
  <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token parameter">moduleId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 参数&quot;./src/index.js&quot;</span>

    <span class="token comment">// Check if module is in cache 模块是否在缓存中</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Create a new module (and put it into the cache)</span>
    <span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      i<span class="token operator">:</span> moduleId<span class="token punctuation">,</span>
      l<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      exports<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Execute the module function 执行传入this指向，模块，模块的空对象exports: {}，require方法</span>
    modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>
      module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span>
      module<span class="token punctuation">,</span>
      module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span>
      __webpack_require__
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Flag the module as loaded</span>
    module<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment">// Return the exports of the module</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// expose the modules object (__webpack_modules__)</span>
  __webpack_require__<span class="token punctuation">.</span>m <span class="token operator">=</span> modules<span class="token punctuation">;</span>

  <span class="token comment">// expose the module cache</span>
  __webpack_require__<span class="token punctuation">.</span>c <span class="token operator">=</span> installedModules<span class="token punctuation">;</span>

  <span class="token comment">// define getter function for harmony exports</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">d</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> getter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>__webpack_require__<span class="token punctuation">.</span><span class="token function">o</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token punctuation">{</span> enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">get</span><span class="token operator">:</span> getter <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// define __esModule on exports</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">r</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> Symbol<span class="token punctuation">.</span>toStringTag<span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&quot;Module&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">&quot;__esModule&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// create a fake namespace object</span>
  <span class="token comment">// mode &amp; 1: value is a module id, require it</span>
  <span class="token comment">// mode &amp; 2: merge all properties of value into the ns</span>
  <span class="token comment">// mode &amp; 4: return value when already ns object</span>
  <span class="token comment">// mode &amp; 8|1: behave like require</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">t</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> mode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> value <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">&amp;&amp;</span> value<span class="token punctuation">.</span>__esModule<span class="token punctuation">)</span>
      <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token keyword">var</span> ns <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    __webpack_require__<span class="token punctuation">.</span><span class="token function">r</span><span class="token punctuation">(</span>ns<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>ns<span class="token punctuation">,</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> value<span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">&amp;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">!=</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> value<span class="token punctuation">)</span>
        __webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>
          ns<span class="token punctuation">,</span>
          key<span class="token punctuation">,</span>
          <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> value<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> key<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ns<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// getDefaultExport function for compatibility with non-harmony modules</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">n</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> getter <span class="token operator">=</span>
      module <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>__esModule
        <span class="token operator">?</span> <span class="token keyword">function</span> <span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> module<span class="token punctuation">[</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">getModuleExports</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> module<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
    __webpack_require__<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>getter<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> getter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> getter<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// Object.prototype.hasOwnProperty.call</span>
  __webpack_require__<span class="token punctuation">.</span><span class="token function-variable function">o</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> property<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// __webpack_public_path__</span>
  __webpack_require__<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

  <span class="token comment">// Load entry module and return exports</span>
  <span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传入入口模块</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>
  <span class="token comment">//  自执行函数传入一个对象即modules</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// key</span>
    <span class="token string">&quot;./src/a.js&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// value</span>
      <span class="token function">eval</span><span class="token punctuation">(</span>
        <span class="token string">&quot;module.exports = 'a_moudle'\n\n//# sourceURL=webpack:///./src/a.js?&quot;</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;./src/index.js&quot;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">eval</span><span class="token punctuation">(</span>
        <span class="token string">'let str = __webpack_require__(/*! ./a.js */ &quot;./src/a.js&quot;)\r\n\r\nconsole.log(str)\n\n//# sourceURL=webpack:///./src/index.js?'</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br></div></div><h4 id="_3-2-2-实时打包"><a href="#_3-2-2-实时打包" class="header-anchor">#</a> 3.2.2 实时打包</h4> <p>如果想要 webpack 监听工作区中文件的改变而实时的打包出新的代码，可以使用 webpack 自带的 watch 选项</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    watch<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 监听的配置项</span>
    watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        poll<span class="token operator">:</span> <span class="token number">1000</span> <span class="token comment">// 每秒询问100次</span>
        aggregateTimeout<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">//防抖</span>
        ignored<span class="token operator">:</span> <span class="token regex">/node_modules/</span> <span class="token comment">//忽略文件</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-3-本地服务"><a href="#_3-3-本地服务" class="header-anchor">#</a> 3.3 本地服务</h3> <p>在之前的打包过程中我们只能通过打包好文件然后双击文件来在浏览器中运行打包后的代码，而我们再开发的时候更希望能通过本地服务器的方式进行访问，这时候我们需要借助第三方插件来生成这个服务，<strong>在 webpack 中内置了一个开发服务<code>webpack-dev-server</code></strong></p> <p>**注意：**该服务进行的不是实际的打包，所以不会在 dist 目录中生成文件，而是进行的内存打包，生成的文件之间运行在服务器上，我们是看不到这些文件的，<strong>在实际开发中我们都是用的这种内存的打包</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i webpack-dev-server -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>安装完成后运行<code>npx webpack-dev-server</code>就能开启该服务（一般也是在 package.json 文件中配置自己的脚本，如<code>npm run dev</code>），默认的端口为<code>localhost:8080</code></strong>，当然也可以在<code>webpack.config.js</code>配置文件中进行配置，<strong>服务配置写在<code>devServer</code>中</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack.config.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.config.js&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.39.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.3.7&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.8.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 开发服务器的配置</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token comment">// 改变开启的端口号</span>
    progress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启内存打包中的进度条，这样我们能清楚地看到打包的进程</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 自动打开浏览器</span>
    contentBase<span class="token operator">:</span> <span class="token string">&quot;./build&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 内存打包指向的目录
     * 开启服务器指向的入口打包文件的地址
     * 默认是index.html文件，到目前需要自己创建该html文件和引入对应打包后的js文件，之后会有自动创建
     */</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//压缩</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>**注意：**上面的<code>contentBase</code>对应的路径中一定要有这个 html 文件，不然就会找不到，<strong>但是我们在实际开发中其实是没有这个文件的，也不会打包好后再去开启服务，<strong>我们希望的是在启动服务时自动在</strong>内存</strong>中创建这个文件，这样我们就能在服务端上直接访问了，这个时候我们就需要一个 html 插件解决这个问题</p> <h3 id="_3-4-支持模板-html"><a href="#_3-4-支持模板-html" class="header-anchor">#</a> 3.4 支持模板 html</h3> <p>使用第三方的 webpackl 插件<code>html-webpack-plugin</code>可以帮我们自动建立一个模板 html 文件打包到内存中，<strong>然后将主要要打包的文件加入到我们设置的模板 html（设置的模板 html 文件中的代码会原封不动的打包输出，所有的配置文件只是针对格式的，内部并不会发生变化，也就是说连注释都会输出过去）里面，并且把结果放在<code>devServer</code>指定的打包指定目录下</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i html-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>安装完成后，在<code>plugins</code>内部添加一个对象来实现使用</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> HTMLWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// plugins是一个数组，放着所有的webpack插件，注意是从下到上，如果有关联项需要考虑位置</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HTMLWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span> <span class="token comment">// html模板，会去找到这个模板</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包后的文件名，默认不写也是index.html</span>
      <span class="token comment">// 对打包的html模板进行压缩</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 删除属性的双引号，除了一些特殊的删除不了以外都能删除</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 折叠空行将所有代码变成一行</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 移除注释</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hash<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 给打包后在模板中引入的文件名生成hash戳，防止缓存</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>其余具体的插件参数选项见：<a href="https://github.com/jantimon/html-webpack-plugin#options" target="_blank" rel="noopener noreferrer">html-webpack-plugin#options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--打包前的模板--&gt;</span>
<span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 模板 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--加了上述参数后打包后的文件--&gt;</span>
<span class="token doctype">&lt;!DOCTYPE html&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span>en</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span>UTF-8</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>viewport</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span>X-UA-Compatible</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 模板 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>text/javascript</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span>main.js?9a08db68a07b35e1f58a</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-5-样式处理"><a href="#_3-5-样式处理" class="header-anchor">#</a> 3.5 样式处理</h3> <p>在进行引入样式处理时也需要进行额外的配置，需要在<code>module</code>模块中写入对应的 css 规则，给对应匹配上的规则添加 loader，<strong>然后直接在入口的 js 文件中使用引用模块 import 或 require 引用文件即可（不引用是不会打包的）</strong></p> <p>**注意：**该 css 的 loader 会将解析后的 css 内容插入到页面 head 标签的最后，如果自己写了对于的 css 样式可能会覆盖掉，如果想要自己在模板 html 中写的样式生效，可以在<code>style-loader</code>的 options 选项中改变样式插入到模板 html 的 head 标签的位置（暂时只能通过这种样式写法，后面会有抽离成文件的插件）</p> <p><strong>loader 的用法</strong></p> <ul><li><p>如果只有一个 loader，可以写成单个字符串</p></li> <li><p>如果有多个 loader，需要写成字符串数组</p></li> <li><p>loader 还可以写成对象的形式，<code>loader</code>属性对应要写的 loader，而还有一个 options 属性则是可以传入对应的参数</p></li> <li><p><strong>loader 的顺序默认是从右向左，从下到上执行</strong>（执行顺序非常重要，如必须要先执行<code>css-loader</code>才能执行<code>style-loader</code>）</p></li></ul> <h4 id="_3-5-1-处理-css"><a href="#_3-5-1-处理-css" class="header-anchor">#</a> 3.5.1 处理 css</h4> <p><strong>处理普通的 css 文件只需要下载 css-loader 与 style-loader 就可以实现</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i css-loader style-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 模块配置</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置规则</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">/**
       * css-loader解析css中的语法，如@import这种
       * style-loader用于把css插入到模板html的head标签中
       * 至于为什么要两个，是因为loader的能力尽量要求单一
       */</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 匹配css结尾的文件</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// 创建style标签，将js的样式资源插入进行，添加到head中生效</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 改变样式插入的位置为head标签的顶部</span>
              insertAt<span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 将css变成commonjs模块加入到js中，里面的内容是字符串</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主要解析@import这种路径</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="_3-5-2-处理-css-预处理器"><a href="#_3-5-2-处理-css-预处理器" class="header-anchor">#</a> 3.5.2 处理 css 预处理器</h4> <p>使用 css 预处理器除了要下载 css-loader 与 style-loader，还需要额外下载对应预处理器需要的 loader，如<code>sass-loader</code>、<code>less-loader</code>与<code>stylus-loader</code>，用法都相同，这里仅以 less 为例</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 下载less-loader肯定是要使用less的，所以一般是一起下载了</span>
<span class="token function">npm</span> i <span class="token function">less</span> less-loader -D
<span class="token comment"># 下载scss-loader肯定是要使用scss的，所以一般是一起下载了</span>
<span class="token function">npm</span> i scss scss-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 模块配置</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置规则</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">/**
       * css-loader解析css中的语法，如@import这种
       * style-loader用于把css插入到模板html的head标签中
       * 至于为什么要两个，是因为loader的能力尽量要求单一
       */</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 匹配css结尾的文件</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// 创建style标签，将js的样式资源插入进行，添加到head中生效</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 改变样式插入的位置为head标签的顶部</span>
              insertAt<span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">// 将css变成commonjs模块加入到js中，里面的内容是字符串</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主要解析@import这种路径</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 可以解析less文件</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 改变样式插入的位置为head标签的顶部</span>
              insertAt<span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主要解析@import这种路径</span>
          <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主要把less转换为css</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 可以解析scss文件</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// 改变样式插入的位置为head标签的顶部</span>
              insertAt<span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主要解析@import这种路径</span>
          <span class="token string">&quot;scss-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 主要把less转换为css</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br></div></div><p><strong>其余的 less-loader 的配置详见：<a href="https://webpack.js.org/loaders/less-loader/#src/components/Sidebar/Sidbar.jsx" target="_blank" rel="noopener noreferrer">less-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <h4 id="_3-5-3-抽离样式"><a href="#_3-5-3-抽离样式" class="header-anchor">#</a> 3.5.3 抽离样式</h4> <p>默认情况下样式文件是放在 js 中的，如果想要将添加到 html 模板中的 css 样式单独作为一个文件抽离出来，自动通过 link 标签进行引入，还需要引入专门抽离 css 样式的插件<code>mini-css-extract-plugin</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i mini-css-extract-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 引入插件</span>
<span class="token keyword">let</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/*
    注意,如果想要分为多个不同的css文件，那么就require引入多次插件，取不同的名字，然后都在这使用，通常这种方式是要区分各个预处理器转换后的文件
    */</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/main.css'</span> <span class="token comment">//要抽离后在打包后目录中的文件名</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 将style-loader替换为插件的loader，因为style-loader是将js中的css变成style标签插入html中</span>
          <span class="token comment">// MiniCssExtractPlugin.loader, 可以直接这样写，这个loader直接是个字符串</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span> <span class="token comment">//主要解析@import这种路径</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>其余 mini-css-extract-plugin 的配置信息详见：<a href="https://github.com/webpack-contrib/mini-css-extract-plugin" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <h4 id="_3-5-4-压缩-css-与-js"><a href="#_3-5-4-压缩-css-与-js" class="header-anchor">#</a> 3.5.4 压缩 css 与 js</h4> <ul><li><p>通过改变压缩项</p> <p>要压缩抽离出来<code>mini-css-extract-plugin</code>的 css 文件就必须要打乱 webpack 默认的压缩 js 文件的规则(webpackl 默认调用了一个压缩 js 的插件 terser-webpack-plugin 进行压缩)，这时候压缩 js 文件需要直接引用插件来进行优化</p> <p>注意：</p> <p>要看到压缩效果需要改为生产环境观察，否则如果是开发环境将直接跳过优化项</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># terser-webpack-plugin不需要安装，webpack本身就自带了</span>
<span class="token function">npm</span> i optimize-css-assets-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//这三个插件进行组合可以打包压缩css和js</span>
<span class="token keyword">let</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> TerserJSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 优化代码属性</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 压缩代码的选项,传入压缩js与压缩css的插件</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserJSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/*
    注意,如果想要分为多个不同的css文件，那么就require引入多次插件，取不同的名字，然后都在这使用，通常这种方式是要区分各个预处理器转换后的文件
    */</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;main.css&quot;</span><span class="token punctuation">,</span> <span class="token comment">//要抽离后的文件名</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><ul><li><p>通过插件引入</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/*
    注意,如果想要分为多个不同的css文件，那么就require引入多次插件，取不同的名字，然后都在这使用，通常这种方式是要区分各个预处理器转换后的文件
    */</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;main.css&quot;</span><span class="token punctuation">,</span> <span class="token comment">//要抽离后的文件名</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 压缩css</span>
    <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div></li></ul> <h4 id="_3-5-5-添加浏览器前缀"><a href="#_3-5-5-添加浏览器前缀" class="header-anchor">#</a> 3.5.5 添加浏览器前缀</h4> <p>一般来说处理 css 相关的文件以及转换，我们都会使用<code>postcss</code>一系列的插件</p> <ul><li><p>使用 postcss-loader 与 postcss-preset-env</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i postcss-loader postcss-preset-env -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// postcss默认会找browserslist中的production的配置项，如果想要使用开发环境的配置项，需要设置NODE_ENV</span>
process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// 帮postcss找到package.json中的browserslist里面的配置来加载执行兼容样式</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              ident<span class="token operator">:</span> <span class="token string">&quot;postcss&quot;</span><span class="token punctuation">,</span>
              <span class="token function-variable function">plugins</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">//postcss插件</span>
                <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;last 1 chrome version&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;last 1 firefox version&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;last 1 safari version&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;production&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;&gt;0.2%&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;not dead&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;not op_mino all&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul> <p>要为打包后的 css 文件自动兼容其余浏览器（也就是要在前面添加前缀），<strong>需要引入 postcss-loader 与 css 优化插件 autoprefixer</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#postcss-loader是专门优化css的loader,而autoprefixer只是其中的一个插件</span>
<span class="token function">npm</span> i postcss-loader autoprefixer -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">//postcss-loader自动为浏览器添加前缀，不过需要先处理这个loader再处理css-loader</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//可以解析less文件</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token comment">//改变样式插入的位置为head标签的顶部</span>
              insertAt<span class="token operator">:</span> <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">//要处理less文件也是一样</span>
          <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><strong>上面只是分配了 postcss-loader，下面还需要处理 postcss-loader 对应的插件</strong>，postcss-loader 需要我们有一个<code>postcss.config.js</code>的文件来处理该 loader</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// postcss.config.js`</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//导出postcss-loader需要的插件，该插件属性是一个数组，装有需要解析的插件</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;autoprefixer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> overrideBrowserslist<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;last 10 versions&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 引入并直接使用autoprefixer，方法的对象参数是对应要支持的浏览器版本，具体看文档</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>其余 postcss-loader 的配置信息详见：<a href="https://github.com/postcss/postcss-loader" target="_blank" rel="noopener noreferrer">postcss-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <h3 id="_3-6-高级-js-转换-es5"><a href="#_3-6-高级-js-转换-es5" class="header-anchor">#</a> 3.6 高级 js 转换 ES5</h3> <p><strong>将高级的 js 转换为 ES5 都需要用到 babel</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 需要使用babel-loader对高级语法进行转换，@babel/core 则是babel核心模块，调用transform方法进行转换</span>
<span class="token function">npm</span> i babel-loader @babel/core -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_3-6-1-基本转换"><a href="#_3-6-1-基本转换" class="header-anchor">#</a> 3.6.1 基本转换</h4> <p>将 ES6 转换为 ES5 还需要配置 babel 的转换模块<code>@babel/preset-env</code>，该模块将一些标准的 js 语法转换为低级的语法</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#所以要ES6转换为ES5需要这三个</span>
<span class="token function">npm</span> i babel-loader @babel/core @babel/preset-env -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//用babel-loader需要把ES6转换为ES5,为loader添加预设选项，该选项就能解决狭义的ES6语法</span>
            presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            cacheDirectory<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启babel缓存，第二次构建时会读取之前的缓存</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 这里的js转换只包括src目录下的</span>
        include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 排除node_modules目录</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>**注意：**只是用<code>@babel/preset-env</code>只能转换基本的 ES6 语法，很多高级 api 是不能转换的，比如 Promise</p> <h4 id="_3-6-2-全部转换"><a href="#_3-6-2-全部转换" class="header-anchor">#</a> 3.6.2 全部转换</h4> <p>**babel 默认只会转换内置的高级的语法，但是不能转换该语法内置的 api，就算转换了内置的 api 也不会内置转换的方法，**也就是说一些高级的 js 语法是由低级语法的 api 实现的，但是 babel 只是将该 api 转换了出来，但是低级的 api 本身不在代码中，**这时候还需要用到一个插件包<code>@babel/plugin-transform-runtime</code>，**该插件是一个开发时用的插件，但是，<strong>如果要上线还会为生产后的代码中输出一些脚本，这时，还需要另外一个<code>@babel/runtime</code>在上线的时候为我们添加该插件（注意这个插件是要在生产环境使用的，因为我们是要转换到生产环境使用的，需要<code>--save</code>）</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i @babel/plugin-transform-runtime -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>npm i @babel/runtime -S
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> legacy<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loose<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>但是，上面的方法不能够解决高级的实例方法，如<code>arr.includes()</code>。</p> <p>如果想解决这个问题，只需要一个<code>@babel/polyfill</code>模块（可以不使用<code>@babel/plugin-transform-runtime</code>了），还是因为是要在生产环境中使用，并且该模块会在代码中使用，所有我们使用<code>--save</code></p> <p><strong>使用<code>@babel/polyfill</code>将 ES6 的语法全部兼容</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 该插件不是在webpack中配置，而是在入口js文件前直接引入即可</span>
<span class="token function">npm</span> i @babel/polyfill -S
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>**使用问题：**该方法会将所有的高级 js 语法全部转换，会造成项目体积过大的问题，如果只想解决部分兼容性问题并不推荐这样做</p> <h4 id="_3-6-3-按需转换"><a href="#_3-6-3-按需转换" class="header-anchor">#</a> 3.6.3 按需转换</h4> <p>因为使用<code>@babel/polyfill</code>兼容所有 ES6 语法会有项目体积过大的问题，我们可以使用按需加载的方法来处理，使用<code>core-js</code>插件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i core-js -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            presets<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>
                <span class="token comment">// 按需加载</span>
                useBuiltIns<span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>
                <span class="token comment">// 指定core-js版本</span>
                corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
                  version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token comment">// 指定兼容哪个版本浏览器</span>
                targets<span class="token operator">:</span> <span class="token punctuation">{</span>
                  chrome<span class="token operator">:</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">,</span>
                  firefox<span class="token operator">:</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">,</span>
                  ie<span class="token operator">:</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span>
                  safari<span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
                  edge<span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h4 id="_3-6-4-es7-转换为-es5"><a href="#_3-6-4-es7-转换为-es5" class="header-anchor">#</a> 3.6.4 ES7 转换为 ES5</h4> <p>如果要兼容一些 ES6 以上的语法，需要按照对应语法解析的插件，如 ES7 的在类中 constructor 外直接写实例属性、使用装饰器修饰类</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>@log
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
  a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这种语法需要<code>@babel/plugin-proposal-class-properties</code>这个类的转换插件和<code>@@babel/plugin-proposal-decorators</code>这个装饰器插件</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 解析ES7类的语法与装饰器语法</span>
<span class="token function">npm</span> i @babel/plugin-proposal-class-properties @babel/plugin-proposal-decorators -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">//用babek-loader需要把ES6转换为ES5</span>
            presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">// 预设是一个大插件的集合，在预设下我们还可以自己配置自己需要的小插件</span>
            plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token comment">//'@babel/plugin-proposal-class-properties', 如果只解析类可以直接写字符串这样写</span>
              <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> legacy<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loose<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token comment">/*
                上面如果要解析修饰类的装饰器必须使用这种顺序，也就是必须先解析class语法，否则会报错
              */</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_3-7-语法校验"><a href="#_3-7-语法校验" class="header-anchor">#</a> 3.7 语法校验</h3> <h4 id="_3-7-1-eslint"><a href="#_3-7-1-eslint" class="header-anchor">#</a> 3.7.1 Eslint</h4> <p>语法校验在我们编程中其实很常见，使用 ESLint 就能帮我们校验代码，ESLint 与 css 和 js 一样都需要配置想要的 loader</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i eslint eslint-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>eslint 需要一个自己制定的校验代码的规则，需要创建一个<code>.eslintrc.json</code>的配置文件，下面是一个 eslint 项目的配置文件</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;parserOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;ecmaVersion&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token string">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;script&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;ecmaFeatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;constructor-super&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;for-direction&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;getter-return&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-async-promise-executor&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-case-declarations&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-class-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-compare-neg-zero&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-cond-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-const-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-constant-condition&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-control-regex&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-debugger&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-delete-var&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-dupe-args&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-dupe-class-members&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-dupe-keys&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-duplicate-case&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-empty&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-empty-character-class&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-empty-pattern&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-ex-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-extra-boolean-cast&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-extra-semi&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-fallthrough&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-func-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-global-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-inner-declarations&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-invalid-regexp&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-irregular-whitespace&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-misleading-character-class&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-mixed-spaces-and-tabs&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-new-symbol&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-obj-calls&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-octal&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-prototype-builtins&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-redeclare&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-regex-spaces&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-self-assign&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-shadow-restricted-names&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-sparse-arrays&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-this-before-super&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-undef&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-unexpected-multiline&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-unreachable&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-unsafe-finally&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-unsafe-negation&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-unused-labels&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-unused-vars&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-useless-catch&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-useless-escape&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;no-with&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;require-atomic-updates&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;require-yield&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;use-isnan&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token string">&quot;valid-typeof&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/.js$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;eslint-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">//我们应该先校验js再转换为ES5代码，所以正常来说这个应该写在下面，也就是要先执行</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            fix<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//自动修复</span>
            enforce<span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span> <span class="token comment">//previous，强制让这个loader在最先执行，还可以写post让这个loader强制最后执行</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span> <span class="token comment">//不检验node_modules中的代码</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">//相同的loader可以写多个，符合从上到下，从左到右的默认规则</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">//普通的loader</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-decorators&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> legacy<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span><span class="token string">&quot;@babel/plugin-proposal-class-properties&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loose<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token string">&quot;@babel/plugin-transform-runtime&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        include<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h4 id="_3-7-2-使用-airbnb-风格"><a href="#_3-7-2-使用-airbnb-风格" class="header-anchor">#</a> 3.7.2 使用 airbnb 风格</h4> <p>airbnb 是一个非常有名的 js 风格语法，我们可以使用 eslint 来让我们书写的代码符合这种规范</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i eslint-loader eslint eslint-config-airhnb-base eslint-plugin-import-eslint -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  rules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
      loader<span class="token operator">:</span> <span class="token string">&quot;eslint-loader&quot;</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        fix<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>然后需要在<code>package.json</code>中增加：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;eslintConfig&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;extend&quot;</span><span class="token operator">:</span> <span class="token string">&quot;airbnb-base&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;browser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 支持浏览器的全局变量</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-8-全局变量引入"><a href="#_3-8-全局变量引入" class="header-anchor">#</a> 3.8 全局变量引入</h3> <p><strong>在 webpack 中引入全局变量主要有四种形式：</strong></p> <ul><li><p>直接引入全局变量后使用 window 来接收全局变量</p></li> <li><p>使用<code>expose-loader</code>将全局变量暴露给 window 对象和模块中，也就是说<strong>使用这个在所有模块都可以使用<code>window.暴露对象</code>或直接使用暴露对象</strong></p></li> <li><p>使用<code>webpack.providePlugin</code>插件为每个模块注入全局对象（此时并没有挂载到 window 上，只是为每个模块注入了全局变量）</p></li> <li><p>在模板 html 中通过 script 标签引入</p></li></ul> <p>**注：**这里的全局变量都以 jquery 的$符合为例</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i jquery -S
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-8-1-直接接收"><a href="#_3-8-1-直接接收" class="header-anchor">#</a> 3.8.1 直接接收</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>$ <span class="token operator">=</span> $<span class="token punctuation">;</span>
conosle<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-8-2-使用-expose-loader"><a href="#_3-8-2-使用-expose-loader" class="header-anchor">#</a> 3.8.2 使用 expose-loader</h4> <p>expose-loader 可以直接写在项目代码中，也可以写在 webpack 的配置项中，因为这种特性，这类 loader 又被叫做内联 loader</p> <p>**注：**配置了这个在所有的模块都能使用</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i expose-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>内联使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js,直接在项目入口引入全局变量</span>
<span class="token keyword">import</span> <span class="token string">&quot;expose-loader?$!jquery&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 不需要使用import from 语法，因为不需要获取到暴露的对象</span>
<span class="token comment">/*
是通过expose-loader的类似查询字符串的写法，全局暴露jquery为$符号，可以使用window.$或直接使用$来获取jquery对象
*/</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>在 webpack 配置文件中添加</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//配置loader,这种loader的验证规则是只要在模块中引用的jquery就会对应上这个loader</span>
        test<span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token string">&quot;expose-loader?$&quot;</span><span class="token punctuation">,</span> <span class="token comment">//然后使用expose-loader将引入的jquery对象变为$在全局使用</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h4 id="_3-8-3-在每个模块中注入"><a href="#_3-8-3-在每个模块中注入" class="header-anchor">#</a> 3.8.3 在每个模块中注入</h4> <p>如果我们要使用很多全局变量，而又不想自己配，又不想暴露给 window 对象造成污染，可以通过 webpack 插件自动为每一个模块注入该全局变量</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//webpack也是一个模块</span>
<span class="token keyword">let</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      $<span class="token operator">:</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 在每个模块中将会jquery的对象都注入为$符,这个jquery是在node_modules中获取的</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token comment">// 现在在文件中不需要进行引入就能使用了，不过不会暴露给window对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="_3-8-4-在-script-标签引用"><a href="#_3-8-4-在-script-标签引用" class="header-anchor">#</a> 3.8.4 在 script 标签引用</h4> <p><strong>通过 script 标签引用的对象会自动挂载到 window 对象上，也可以直接在模块内部使用</strong></p> <p>但是，在模板 html 中通过<code>script</code>标签引入<code>jquery</code>, 但是在<code>js</code>中，如果又想再次引入是用<code>import</code>引用一次 jquery,会重新打包<code>jquery</code>,而我们所想的应该是如果使用了 script 标签引用了的全局变量应该不被打包，所以我们可以使用 webpack 提供的<code>externals</code>功能，<strong>进行变量挂载，从而使用 index.html 中引入的 cdn 库，避免了打包时将复杂的第三方库打包</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 我们不希望通过这样使用</span>
<span class="token keyword">const</span> $ <span class="token operator">=</span> window<span class="token punctuation">.</span>$<span class="token punctuation">;</span>
<span class="token comment">// 我们只希望这样引用</span>
<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  externals<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 下面这种externals无论在哪使用jquery都会匹配，并且使用$才能够生效</span>
    jquery<span class="token operator">:</span> <span class="token string">&quot;$&quot;</span><span class="token punctuation">,</span> <span class="token comment">//将jquery库中的对象赋给全局的$变量，如果没用script标签引入都会报错</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">&quot;jquery&quot;</span><span class="token punctuation">;</span> <span class="token comment">//引入不打包，所以这段代码没有实际意义，只是给编译器看的</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>$<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果没有用script标签引入就会报错，上面的代码没有意义</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-9-图片处理"><a href="#_3-9-图片处理" class="header-anchor">#</a> 3.9 图片处理</h3> <p>一般来说有三种方式创建图片：</p> <ul><li><p>使用 H5 的 API 在 JS 中创建图片</p></li> <li><p>在 css 中使用 background-image 导入背景图片</p></li> <li><p>在 img 标签中引用图片</p></li></ul> <p>在 webpack 中使用图片时，因为是要形成打包后的文件，所以路径就会有问题</p> <p>一般通过 require 直接引入图片，这时会创建一个存在内存中的新的图片地址，通过这种方式才能在打包后使用该图片,不过引入图片就要配置与引入静态文件相关的 loader</p> <p>我们这里使用 url-loader 和 file-loader（<strong>只对于在 JS 中引入图片和在 js 中引入了 css，css 又引入了背景图片的行为</strong>）。实际使用 url-loader，不过 url-loader 依赖于 file-loader</p> <h4 id="_3-9-1-在不同环境下使用"><a href="#_3-9-1-在不同环境下使用" class="header-anchor">#</a> 3.9.1 在不同环境下使用</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i url-loader file-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        <span class="token comment">// 当图片小于多少，用base64,否则用url-loader产生真实的图片</span>
        <span class="token comment">/*
                    优点：减少请求数量（减轻服务器压力）
                    缺点：图片体积会更大（文件请求速度更慢）
                */</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 用作限制</span>
            limit<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span> <span class="token comment">// 8kb之内用base64</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>flie-lodaer 默认会在内部生成一张图片到 build 的目录下，并且把生成图片的名字返回出来</p> <ul><li><p>第一种情况: 图片地址要</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>引入，直接写图片的地址，会默认为字符串</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">&quot;./logo.png&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

image<span class="token punctuation">.</span>src <span class="token operator">=</span> logo<span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>第二种情况:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>css <span class="token operator">-</span> loader<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>会将<code>css</code>里面的图片转为<code>require</code>的格式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>div <span class="token punctuation">{</span>
    background<span class="token operator">:</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token string">&quot;./logo.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* require(&quot;./logo.png&quot;) */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>第三种情况: 解析<code>html</code>中的<code>image</code></p> <p>使用<code>html-withimg-loader</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i html-withimg-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        <span class="token comment">// 处理html的img图片（负责引入img,从而能被url-loader进行处理）</span>
        use<span class="token operator">:</span> <span class="token string">&quot;html-withimg-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>使用<code>html-loader</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> i html-loader -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
            <span class="token comment">// 使用html-loader时需要将url的esModule关闭，因为url-loader默认是使用es6模块解析，而html-loader使用的commonjs，解析时会出现[Object Module]</span>
            esModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        <span class="token comment">// 处理html的img图片（负责引入img,从而能被url-loader进行处理）</span>
        use<span class="token operator">:</span> <span class="token string">&quot;html-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></li></ul> <h4 id="_3-9-2-打包文件分类"><a href="#_3-9-2-打包文件分类" class="header-anchor">#</a> 3.9.2 打包文件分类</h4> <p>如果我们先想要把文件资源分类处理，添加配置项，webpack 也会自动的加打包后的路径转换</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        <span class="token comment">// 当图片小于多少，用base64,否则用file-loader产生真实的图片</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// 用作限制</span>
            limit<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 200k 200 * 1024</span>
            outputPath<span class="token operator">:</span> <span class="token string">&quot;img/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包后输出地址 在dist/img</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>同时，在我们前面的 CSS 插件中，也可以直接写入要分类的目录</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;css/main.css&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-9-3-加入-cdn-前缀"><a href="#_3-9-3-加入-cdn-前缀" class="header-anchor">#</a> 3.9.3 加入 CDN 前缀</h4> <p>如果我们希望输出的时候，给这些<code>css\img</code>加上前缀，传到服务器也能访问，可以为<code>output</code>加上<code>publicPath</code>属性</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;bundle.[hash:8].js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// hash: 8只显示8位</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    publicPath<span class="token operator">:</span> <span class="token string">&quot;http://www.mayufo.cn&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 给静态资源统一加</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如果我们只希望处理某一类文件，比如图片：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        <span class="token comment">// 当图片小于多少，用base64,否则用file-loader产生真实的图片</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span>
          loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token operator">:</span> <span class="token punctuation">{</span>
            limit<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 200k 200 * 1024</span>
            outputPath<span class="token operator">:</span> <span class="token string">&quot;/img/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包后输出地址</span>
            publicPath<span class="token operator">:</span> <span class="token string">&quot;http://www.baidu.com&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_3-10-打包其他资源"><a href="#_3-10-打包其他资源" class="header-anchor">#</a> 3.10 打包其他资源</h3> <p>除了直接指定需要打包的资源外，我们还可以通过直接使用<code>exclude</code>选项来打包其他资源</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        exclude<span class="token operator">:</span> <span class="token regex">/\.(css|js|html0)$/</span><span class="token punctuation">,</span> <span class="token comment">// 假设只有这三种资源为主要资源</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;file-lodaer&quot;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;[hash:10].[ext]&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_4-webpack-性能优化"><a href="#_4-webpack-性能优化" class="header-anchor">#</a> 4. webpack 性能优化</h2> <h3 id="_4-1-hmr"><a href="#_4-1-hmr" class="header-anchor">#</a> 4.1 HMR</h3> <p>HMR（hot module replacement）意为热模板替换，能够在一个模块发生变化时值重新打包这个模块，而不是打包所有模块，极大的提高构建速度，一般用于开发环境使用。</p> <ul><li><p>样式文件：因为 style-loader 内部实现了 hmr 功能，所以默认可以用使用 hmr 功能（所以开发环境不需要将样式文件打包）</p></li> <li><p>js 文件：</p> <p>默认不支持 hmr 功能</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 一旦module.hot为true,说明开启了hmr功能</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">&quot;./log.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 方法会监听 log.js文件的变化，一旦变化就触发回调函数，其他文件就不会被重新打包，否者就会打包所有的文件</span>
    <span class="token comment">// dosomething</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>注意：hmr 功能 js 的处理，只能处理非入口 js 文件的其他文件。</p></li> <li><p>html 文件：</p> <p>默认不支持 hmr 功能，同时 html 文件是默认是不能热更新的。</p> <p>注：</p> <p>因为项目中一般都只有一个 html 文件，所以我们是不需要为 html 文件做 hmr 的，改变 html 文件项目就一定要重新打包。</p> <p>解决热更新：</p> <p>修改 entry 入口，将 html 文件引入，这样每次修改 html 文件的时候都会重新打包项目。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 多入口</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/public/index.htnl&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h3 id="_4-2-source-map"><a href="#_4-2-source-map" class="header-anchor">#</a> 4.2 source-map</h3> <p><strong>source-map 是一种提供源代码到构建后代码映射技术（如果代码出错了，通过映射可以追踪代码错误）</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  devtool<span class="token operator">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可选值有<code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code></p> <p>大体有以下大类，还有一些是通过下面的大类组合而来的：</p> <ul><li><p>**source-map：**外部，能够提示出错误代码的准确信息和源代码的错误位置</p></li> <li><p>**inline-source-map：**内联，只生成一个内联 source-map，能够提示出错误代码的准确信息和源代码的错误位置</p></li> <li><p>**hidden-source-map：**外部 source-map，能够提示错误代码的错误原因，但是没有错误位置，不能追踪到源代码错误，只能提示到构建后代码的错误位置（只隐藏源代码，不隐藏构建后的代码）</p></li> <li><p>**eval-source-map：**内联，但每一个文件都会生成对应的 source-map 在 eval 中，能够提示出错误代码的准确信息和源代码的错误位置</p></li> <li><p>**nosource-source-map：**外部，能找到错误代码的准确信息，但是没有任何源代码信息（隐藏所有代码）</p></li> <li><p>**cheap-source-map：**外部，能够提示出错误代码的准确信息和源代码的错误位置，但是只能精确到某一行，不能找到某一行中的哪一个错误</p></li> <li><p>**cheap-module-source-map：**外部，能够提示出错误代码的准确信息和源代码的错误位置</p></li></ul> <p><strong>内联与外部的区别</strong></p> <ul><li><p>外部生成了对应的文件，而内联没有</p></li> <li><p>内联的构建速度更快</p></li></ul> <p><strong>两种环境的选择</strong></p> <ol><li><strong>开发环境</strong>：需要速度快，调试更友好。</li></ol> <ul><li><p><strong>速度快</strong>：由于<code>eval&gt;inline&gt;cheap&gt;...</code>，所以可以选择<code>eval-cheap-source-map</code>和<code>eval-source-map</code></p></li> <li><p><strong>调试更友好</strong>：可以选择<code>source-map</code>、<code>cheap-module-source-map</code>和<code>cheap-source-map</code></p></li></ul> <p><strong>综上</strong>：一般可以选择<code>eval-source-map</code>（Vue 和 React 脚手架默认就是这种）或者<code>eval-cheap-module-source-map</code></p> <ol start="2"><li><strong>生产环境</strong>：需要考虑是否隐藏源代码，是否需要调试友好。同时要注意的是生产环境不要用内联，这样会使得文件体积增大</li></ol> <ul><li><p><strong>调试友好</strong>：可以使用<code>source-map</code>和<code>cheap-module-source-map</code></p></li> <li><p><strong>需要隐藏源代码</strong>：可以使用<code>nosource-source-map</code>和<code>hidden-source-map</code></p></li></ul> <h3 id="_4-3-oneof"><a href="#_4-3-oneof" class="header-anchor">#</a> 4.3 oneof</h3> <p>在之前我们配置 loader 的时候，其实每一个文件都会对每一个 loader 进行对比适配，不管是否能匹配上，这样做会很消耗性能，而 oneof 就可以帮助我们提高性能，它作用类似于 switch，在匹配上一个之后就不会继续往下面匹配了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mini-css-extract-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> optimizeCssAssetsWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;optimize-css-assets-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
  <span class="token operator">?</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
  <span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isDev <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token comment">// 复用loader</span>
<span class="token keyword">const</span> commonCSSLoader <span class="token operator">=</span> <span class="token punctuation">[</span>
  MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
  <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    loader<span class="token operator">:</span> <span class="token string">&quot;postcss-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      ident<span class="token operator">:</span> <span class="token string">&quot;postcss&quot;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">plugins</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;postcss-preset-env&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// loader</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;eslint-loader&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 优先执行</span>
        enforce<span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">/*
          package.json里面写上&quot;eslintConfig&quot;:{
            &quot;extends&quot;:'airbnb-base&quot;
          }
        */</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          fix<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 但是需要注意不能同时有两个配置匹配同一类型的文件，所有拿出一个js配置到外面</span>
        oneOf<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token operator">...</span><span class="token punctuation">(</span>isDev <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span> <span class="token operator">:</span> commonCSSLoader<span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token operator">...</span><span class="token punctuation">(</span>isDev <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span> <span class="token operator">:</span> commonCSSLoader<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
            exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              presets<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token comment">// 按需加载</span>
                  useBuiltIns<span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span><span class="token punctuation">,</span>
                  <span class="token comment">// 指定core-js版本</span>
                  corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
                    version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token comment">// 指定兼容哪个版本浏览器</span>
                  targets<span class="token operator">:</span> <span class="token punctuation">{</span>
                    chrome<span class="token operator">:</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">,</span>
                    firefox<span class="token operator">:</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">,</span>
                    ie<span class="token operator">:</span> <span class="token string">&quot;9&quot;</span><span class="token punctuation">,</span>
                    safari<span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
                    edge<span class="token operator">:</span> <span class="token string">&quot;17&quot;</span><span class="token punctuation">,</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">&quot;[hash:10].[ext]&quot;</span><span class="token punctuation">,</span>
              esModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span> <span class="token string">&quot;imgs&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// html资源</span>
            test<span class="token operator">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;html-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            exclude<span class="token operator">:</span> <span class="token regex">/\.(html|css|less|js|jpg|png|gif)$/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              name<span class="token operator">:</span> <span class="token string">&quot;[hash:10].[ext]&quot;</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span> <span class="token string">&quot;media&quot;</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br></div></div><h3 id="_4-4-缓存"><a href="#_4-4-缓存" class="header-anchor">#</a> 4.4 缓存</h3> <p>为了使得项目性能更加优化，很多地方都会使用缓存，但是有些时候缓存不能起到预定的效果，需要根据实际来使用缓存</p> <ul><li><p><strong>babel 缓存：</strong>
之前在处理 ES6 的时候写到过，它内置可以开启<code>cacheDirectory:true</code>，让第二次打包构建速度更快</p></li> <li><p><strong>文件资源缓存：</strong>
该缓存是默认存在于 webpack 打包中的，但是这种缓存在很多时候会让我们想要修改的数据无效，需要我们自己为打包后的文件设置哈希值来清除缓存。文件资源缓存的作用是让代码上线运行缓存更好使用</p></li> <li><ul><li>**hash：**每次 webpack 构建时会生成一个唯一的 hash 值。
**问题：**因为 js 和 css 同时使用一个 hash 值，如果重新打包，会导致所有缓存失效，但是用户却只想要修改一个文件</li></ul></li> <li><ul><li>**chunkhash：**根据 chunk 生成的 hash 值，如果打包来源于同一个 chunk，那么 hash 值就一样
**问题：**js 和 css 的 hash 值还是一样的，因为 css 是在 js 中引入，所以属于同一个 chunk</li></ul></li> <li><ul><li>**contenthash：**根据文件的内容生成 hash 值，不同文件 hash 值一定不相同</li></ul></li></ul> <h3 id="_4-5-tree-shaking"><a href="#_4-5-tree-shaking" class="header-anchor">#</a> 4.5 tree shaking</h3> <p><code>tree shaking</code>的作用是去除无用的代码，减少代码的体积。</p> <p>但是使用<code>tree shaking</code>需要有两个前提：</p> <ul><li><p>必须使用 ES6 模块化</p></li> <li><p>需要开启 production 环境</p></li></ul> <p>**注意：**有些时候我们开启<code>tree shaking</code>时可能会把我们项目中的<code>css、@babel/polyfill</code>文件消除掉</p> <p>在<code>package.json</code>中：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;sideEffects&quot;</span><span class="token operator">:</span><span class="token boolean">false</span> <span class="token comment">// 当开启为false时会让所有代码都没有副作用，tree shaking就会将css文件一起删除掉</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;sideEffects&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;*.css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*.less&quot;</span><span class="token punctuation">]</span> <span class="token comment">// 我们最好手动配置清除</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-6-代码分割"><a href="#_4-6-代码分割" class="header-anchor">#</a> 4.6 代码分割</h3> <h4 id="_4-6-1-打包多页应用"><a href="#_4-6-1-打包多页应用" class="header-anchor">#</a> 4.6.1 打包多页应用</h4> <p>打包多页应用的方式很简单，使用多个入口和多个模板就能完成多个页面的打包</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 多入口</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    home<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
    other<span class="token operator">:</span> <span class="token string">&quot;./src/other.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用[name]会让各在入口文件输出各自的出口文件</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;home.html&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 模板要引入哪些入口文件</span>
      chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;other.html&quot;</span><span class="token punctuation">,</span>
      chunks<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;other&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// other.html 里面有 other.js &amp; home.js</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="_4-6-2-配置-node-modules-的-chunk"><a href="#_4-6-2-配置-node-modules-的-chunk" class="header-anchor">#</a> 4.6.2 配置 node_modules 的 chunk</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 多入口</span>
<span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    home<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
    other<span class="token operator">:</span> <span class="token string">&quot;./src/other.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用[name]会让各在入口文件输出各自的出口文件</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">/*
        1.如果是单文件，可以自动将node_modules中代码单独打包一个chunk最终输出
        2.自动分析多入口chunk中有没有公共文件，如果有会单独打包成一个chunk用来共用
    */</span>
  optimizaion<span class="token operator">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="_4-6-3-js-代码打包"><a href="#_4-6-3-js-代码打包" class="header-anchor">#</a> 4.6.3 js 代码打包</h4> <p>通过 js 代码的注释效果能够将 webpack 的打包机制将相同 chunk 名字的代码打包在一起</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*
    通过js代码，让某个文件单独打包为一个chunk：
    使用import动态导入的语法，能让一个文件单独被打包，但是默认是随机的id，可以在前面加上注释生成想要的名字
*/</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'test' */</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;文件加载失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_4-7-懒加载与预加载"><a href="#_4-7-懒加载与预加载" class="header-anchor">#</a> 4.7 懒加载与预加载</h3> <ul><li><p>懒加载：</p> <p>js 中使用懒加载其实非常简单，我们只需要使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样的语法通过</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.then()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>的方式获取回调就能够实现这样的效果。同时该方法也不会重复加载模块，第二次使用会引用缓存中的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'test' */</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>预加载：</p> <p>预加载（prefetch）会在使用之前，提前加载 js 文件，正常的加载可以认为是并行加载（同一时间加载多个文件），而预加载是等其他资源加载完成之后，浏览器空闲时偷偷进行加载资源。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用webpackPrefetch开启预加载</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'test', webpackPrefetch: true */</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <h3 id="_4-8-pwa（离线可访问）"><a href="#_4-8-pwa（离线可访问）" class="header-anchor">#</a> 4.8 PWA（离线可访问）</h3> <p>PWA（渐进式网络开发应用程序）可以为我们提供即使离线状态下浏览器也可以访问网站的能力。</p> <p>要在 webpack 中启用 PWA，我们需要下载<code>workbox-webpack-plugin</code>作为插件使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i workbox-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> workboxWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;workbox-webpack-plugin &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">/*
            该插件最终会帮我们生成一个serviceworker配置文件
            下面两个配置的作用：
            1.帮助serviceworker快速启动
            2.删除旧的serviceworker
        */</span>
    <span class="token keyword">new</span> <span class="token class-name">workboxWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      clientClaim<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      skipWaiting<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.js</span>
<span class="token comment">/*
    注册serviceworker
    处理兼容性问题
*/</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;serviceWorker&quot;</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    navigator<span class="token punctuation">.</span>serviceWorker
      <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">&quot;/service-worker.js&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;注册成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;注册失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_4-9-多进程打包"><a href="#_4-9-多进程打包" class="header-anchor">#</a> 4.9 多进程打包</h3> <p>webpack 中启用多进程打包需要使用<code>thread-loader</code></p> <p>**注意：**开启多进程打包不一定会让打包速度更加快，因为进程启动和通信之间也有时间开销，只有当工作消耗时间比较长，比如有很多 js 代码的时候，才需要多进程打包</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i thread-lodaer -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    module<span class="token operator">:</span> <span class="token punctuation">{</span>
        rules<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token comment">// 但是需要注意不能同时有两个配置匹配同一类型的文件，所有拿出一个js配置到外面</span>
                oneOf<span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
                        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
                        use<span class="token operator">:</span> <span class="token punctuation">[</span>
                            <span class="token comment">// 一般多进程打包都是和babel一起使用</span>
                            <span class="token punctuation">{</span>
                                loader<span class="token operator">:</span> <span class="token string">'thread-loader'</span><span class="token punctuation">,</span>
                                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                                    workers<span class="token operator">:</span> <span class="token number">2</span> <span class="token comment">// 两个进程</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                            <span class="token punctuation">{</span>
                                loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
                                options<span class="token operator">:</span> <span class="token punctuation">{</span>
                                    presets<span class="token operator">:</span> <span class="token punctuation">[</span>
                                        <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
                                        <span class="token punctuation">{</span>
                                            <span class="token comment">// 按需加载</span>
                                            useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
                                            <span class="token comment">// 指定core-js版本</span>
                                            corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
                                                version<span class="token operator">:</span> <span class="token number">3</span>
                                            <span class="token punctuation">}</span><span class="token punctuation">,</span>
                                            <span class="token comment">// 指定兼容哪个版本浏览器</span>
                                            targets<span class="token operator">:</span> <span class="token punctuation">{</span>
                                                chrome<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
                                                firefox<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
                                                ie<span class="token operator">:</span> <span class="token string">'9'</span><span class="token punctuation">,</span>
                                                safari<span class="token operator">:</span> <span class="token string">'10'</span><span class="token punctuation">,</span>
                                                edge<span class="token operator">:</span> <span class="token string">'17'</span>
                                            <span class="token punctuation">}</span>
                                        <span class="token punctuation">}</span>
                                    <span class="token punctuation">]</span>，
                                    cacheDirectory<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 开启babel缓存，第二次构建时会读取之前的缓存</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">]</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h3 id="_4-10-externals"><a href="#_4-10-externals" class="header-anchor">#</a> 4.10 externals</h3> <p>在前面也说到过，当我们引入全局的库的时候我们可能会使用 externals，使用 externals 可以让 webpack 强制不打包内部指定的包，要使用的时候直接从 script 标签获取，起到减少打包体积的作用。</p> <h3 id="_4-11-dll"><a href="#_4-11-dll" class="header-anchor">#</a> 4.11 dll</h3> <p>**使用 dll 技术，对某些库（第三方库：jquery、react、vue...）等进行单独打包。**dll 已经由 webpack 进行集成过了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.dll.js</span>
<span class="token comment">/*
    该文件名为webpack.dll.js，所以在运行打包时是 webpack --config webpack.dll.js 来打包外部库
*/</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 最终打包生成的[name] --&gt; jquery</span>
    <span class="token comment">// ['jquery'] --&gt; 要打包生成的库叫jquery</span>
    jquery<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    library<span class="token operator">:</span> <span class="token string">&quot;[name]_[hash]&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包的库里面向外面暴露出去的内容叫什么名字，相当于就是全局变量名</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">&quot;[name]_[hash]&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 映射库的暴露的内容名称</span>
      path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 输出的文件路径</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> AddAssetHtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;add-asset-html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;built.js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 告诉webpack哪些库不参与打包，同时使用名称也会改变</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 通过映射来寻找</span>
      manifest<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll/manifest.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 将某个文件打包出去，比你html资源中引入</span>
    <span class="token keyword">new</span> <span class="token class-name">AddAssetHtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dll/jquery.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="_5-配置详解"><a href="#_5-配置详解" class="header-anchor">#</a> 5. 配置详解</h2> <h3 id="_5-1-entry"><a href="#_5-1-entry" class="header-anchor">#</a> 5.1 entry</h3> <p>entry 是 webpack 打包的入口起点 ，该入口可以使用多种形式打包：</p> <ul><li><p>string：</p> <p>单入口，打包形成一个 chunk，输出一个 bundle 文件，此时 chunk 的名称默认是 main</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>[]:string：</p> <p>多入口，所有入口文件最终会形成一个 chunk，输出一个 bundle 文件，一般可以用来处理 hmr 中的 html 热更新的问题</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./src/home.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>object：</p> <p>多入口，有几个入口文件就形成几个 chunk，会输出多个 bundle 文件，此时 chunk 的名称为 key</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 下面的代码最终会行2个bundle文件</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 多入口，所有入口文件最终会形成一个chunk，输出一个bundle文件，文件名为index</span>
    index<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;./src/home.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 形成一个chunk，输出一个bundle</span>
    add<span class="token operator">:</span> <span class="token string">&quot; ./src/add.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>一般这种情况可以让我们单独打包第三方库：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
    jquery<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    react<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h3 id="_5-2-output"><a href="#_5-2-output" class="header-anchor">#</a> 5.2 output</h3> <p>output 是 webpack 打包的出口</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token operator">:</span> <span class="token string">'./src/index.js'</span>
    output<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 文件名称（指定名称+目录）</span>
        filename<span class="token operator">:</span> <span class="token string">'js/[name].js'</span><span class="token punctuation">,</span>
        <span class="token comment">// 输出文件目录（将来所有资源输出的公共目录）</span>
        path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 所有资源引入公共路径，如将前面我们写的js/[name].js，在引入的时候会成为/js/[name].js</span>
        publicPath<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
        chunkFilename<span class="token operator">:</span> <span class="token string">'js/[name]_chunk.js'</span><span class="token punctuation">,</span> <span class="token comment">// 非入口chunk的名称</span>
        library<span class="token operator">:</span> <span class="token string">'[name]'</span><span class="token punctuation">,</span> <span class="token comment">// 向外暴露库的变量名</span>
        libraryTarget<span class="token operator">:</span> <span class="token string">'window'</span> <span class="token comment">// 变量名添加到那个对象下（不填就为一个全局变量的形式）</span>
        <span class="token comment">/*
        如：
            browser：window
            node：global
            commonjs模块内部引入：commonjs
        */</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_5-3-module"><a href="#_5-3-module" class="header-anchor">#</a> 5.3 module</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// loader配置</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        <span class="token comment">// 多个loader使用use</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        <span class="token comment">// 排除node_modules下的js文件</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        <span class="token comment">// 只检查src下的js文件</span>
        include<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">// 优先执行</span>
        enforce<span class="token operator">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 延后执行</span>
        <span class="token comment">// enforce: 'post'</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;eslint-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 单个loader使用loader，可以配置options</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="_5-4-resolve"><a href="#_5-4-resolve" class="header-anchor">#</a> 5.4 resolve</h3> <p>resolve 用于配置 webpack 解析模块规则</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解析模块的规则</span>
    resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 配置解析模块路径别名。优点：简写路径。缺点：没有路径智能提示。（可以使用ts或编译器配置）</span>
        alias<span class="token operator">:</span> <span class="token punctuation">{</span>
            $css<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/css'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span>
        <span class="token comment">// 配置省略文件路径的后缀名，按照数组顺序依次寻找</span>
        extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.jsx'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">,</span> <span class="token string">'.css'</span><span class="token punctuation">]</span>
        <span class="token comment">// 告诉webpack解析模块是去哪个目录寻找</span>
        modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_5-5-devserver"><a href="#_5-5-devserver" class="header-anchor">#</a> 5.5 devServer</h3> <p>devServer 专门用来配置 webpack 开发环境的服务配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 运行代码的目录</span>
    contentBase<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 监视contentBase目录下的所有文件，一旦文件发生变化就会reload</span>
    watchContentBase<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    watchOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 忽略文件</span>
      ignored<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 启动gzip压缩</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 端口号</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token comment">// 域名</span>
    host<span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 自动打开浏览器</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 开启hmr功能</span>
    hot<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 不需要显示启动服务器日志信息</span>
    clientLogLevel<span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 除了一些基本启动信息以为，不打印其他内容</span>
    quiet<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果出错了，不需要全屏提示</span>
    overlay<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 服务器代理</span>
    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 代理地址</span>
        target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:3000&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 路径重写</span>
        pathRewrite<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="_5-6-optimization"><a href="#_5-6-optimization" class="header-anchor">#</a> 5.6 optimization</h3> <p>optimization 专门用来处理 webpack 打包时性能优化的部分</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> TerserWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
  optimization<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 处理公共代码打包</span>
    splitChunks<span class="token operator">:</span> <span class="token punctuation">{</span>
      chunks<span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 下面的配置都是默认值</span>
      <span class="token comment">/*
          minSize: 30 * 1024, // 分割的chunk最小为30kb
          maxSize: 0, // 最大没有限制
          minChunks: 1, // 要提取的chunk最少被引用一次
          maxAsyncRequests: 5, // 按需加载时并行加载文件的最大数量
          maxInitialRequests: 3, // 入口js最大并行请求数量
          name: true, // 可以使用命名规则，开启后下面的命名相关的声明规则就可以生效
          automaticNameDelimiter: '~', // 名称连接符，打包后文件名以~连接
          cacheGroups: { // 分割chunk的组
              // 下面的键是分割后组的名称
              // node_modules文件会被打包到vendors组的chunk中，生成vendors~xxx.js
              // 同时所有分组均满足上面所写的所有规则，如果在下面重复写了会覆盖掉上面的
              vendors: {
                  // 只分割node_modules中的
                  test: /[\\/]node_modules[\\/]/,
                  // 优先级，冲突时会根据优先级大小打包
                  priority: -10
              },
              default: {
                  // 要提取的chunk最少被引用2次
                  minChunks: 2,
                  priority: -20,
                  // 如果当前被打包的模块和已被提出的模块是同一个，就不会重复打包
                  reuseExistingChunk: true
              }
          }
              */</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 将当前模块的记录其他模块的hash单独打包为一个文件runtime，用于解决修改a文件时导致b文件contenthash变化所产生的影响</span>
    runtimeChunk<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">name</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">entrypoint</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">runtime-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    minimizer<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 配置生产环境的压缩方案：js和css</span>
      <span class="token comment">/*
                在webpack 4.2.6之后使用的是terser-webpack-plugin进行代码压缩
            */</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// 开启缓存</span>
        cache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 开启多进程打包</span>
        parallel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">// 启动source-map</span>
        sourceMap<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="_6-webpack-配置模板"><a href="#_6-webpack-配置模板" class="header-anchor">#</a> 6. webpack 配置模板</h2> <h3 id="_6-1-基本模板"><a href="#_6-1-基本模板" class="header-anchor">#</a> 6.1 基本模板</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> optimizeCssAssetsWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span>

process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
  <span class="token operator">?</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
  <span class="token operator">:</span> <span class="token string">'development'</span>

<span class="token keyword">const</span> isDev <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span>

<span class="token comment">// 复用loader</span>
<span class="token keyword">const</span> commonCSSLoader <span class="token operator">=</span> <span class="token punctuation">[</span>
  MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
  <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    loader<span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      ident<span class="token operator">:</span> <span class="token string">'postcss'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">plugins</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token operator">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'js/built.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// loader</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
        <span class="token comment">// 优先执行</span>
        enforce<span class="token operator">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
        <span class="token comment">/*
          package.json里面写上&quot;eslintConfig&quot;:{
            &quot;extends&quot;:'airbnb-base&quot;
          }
        */</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          fix<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 但是需要注意不能同时有两个配置匹配同一类型的文件，所有拿出一个js配置到外面</span>
        oneOf<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token operator">...</span><span class="token punctuation">(</span>isDev <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span> <span class="token operator">:</span> commonCSSLoader<span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token string">'less-loader'</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
            use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">(</span>isDev <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span> <span class="token operator">:</span> commonCSSLoader<span class="token punctuation">)</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
            exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              presets<span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                  <span class="token comment">// 按需加载</span>
                  useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
                  <span class="token comment">// 指定core-js版本</span>
                  corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
                    version<span class="token operator">:</span> <span class="token number">3</span>
                  <span class="token punctuation">}</span><span class="token punctuation">,</span>
                  <span class="token comment">// 指定兼容哪个版本浏览器</span>
                  targets<span class="token operator">:</span> <span class="token punctuation">{</span>
                    chrome<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
                    firefox<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
                    ie<span class="token operator">:</span> <span class="token string">'9'</span><span class="token punctuation">,</span>
                    safari<span class="token operator">:</span> <span class="token string">'10'</span><span class="token punctuation">,</span>
                    edge<span class="token operator">:</span> <span class="token string">'17'</span>
                  <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>，
             cacheDirectory<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 开启babel缓存，第二次构建时会读取之前的缓存</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            test<span class="token operator">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              limit<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
              name<span class="token operator">:</span> <span class="token string">'[hash:10].[ext]'</span><span class="token punctuation">,</span>
              esModule<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span> <span class="token string">'imgs'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// html资源</span>
            test<span class="token operator">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">'html-loader'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            exclude<span class="token operator">:</span> <span class="token regex">/\.(html|css|less|js|jpg|png|gif)$/</span><span class="token punctuation">,</span>
            loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token operator">:</span> <span class="token punctuation">{</span>
              name<span class="token operator">:</span> <span class="token string">'[hash:10].[ext]'</span><span class="token punctuation">,</span>
              outputPath<span class="token operator">:</span> <span class="token string">'media'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        removeAttributeQuotes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 删除属性的双引号，除了一些特殊的删除不了以外都能删除</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 折叠空行将所有代码变成一行</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 移除注释</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 抽离css</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span> filename<span class="token operator">:</span> <span class="token string">'css/built.css'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 压榨css</span>
    <span class="token keyword">new</span> <span class="token class-name">optimizeCssAssetsWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br></div></div><h3 id="_6-2-开发环境的基本配置"><a href="#_6-2-开发环境的基本配置" class="header-anchor">#</a> 6.2 开发环境的基本配置</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">&quot;./src/js/index.js&quot;</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;js/built.js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// loader的配置</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 处理less资源</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 处理css资源</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 处理图片资源</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpg|png|gif)$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          limit<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">&quot;[hash:10].[ext]&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// 关闭es6模块化 esModule: false, outputPath: 'imgs'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 处理html中img资源</span>
        test<span class="token operator">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;html-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 处理其他资源</span>
        exclude<span class="token operator">:</span> <span class="token regex">/\.(html|js|css|less|jpg|png|gif)/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;[hash:10].[ext]&quot;</span><span class="token punctuation">,</span>
          outputPath<span class="token operator">:</span> <span class="token string">&quot;media&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// plugins的配置</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">&quot;./src/index.html&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">,</span>
  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;build&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    compress<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h3 id="_6-3-生产环境的配置"><a href="#_6-3-生产环境的配置" class="header-anchor">#</a> 6.3 生产环境的配置</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
  resolve
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCssAssetsWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义nodejs环境变量：决定使用browserslist的哪个环境</span>
process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">=</span> <span class="token string">'production'</span><span class="token punctuation">;</span>
<span class="token comment">// 复用loader const commonCssLoader = [</span>
MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
  <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 还需要在package.json中定义browserslist loader: 'postcss-loader', options: { ident: 'postcss',</span>
    <span class="token function-variable function">plugins</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/js/index.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">'js/built.js'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'build'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>commonCssLoader<span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>commonCssLoader<span class="token punctuation">,</span> <span class="token string">'less-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">/*
      正常来讲，一个文件只能被一个loader处理。
      当一个文件要被多个loader处理，那么一定要指定loader执行的先后顺序：
      先执行eslint 在执行babel
      */</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 在package.json中eslintConfig --&gt; airbnb test: /\.js$/, exclude: /node_modules/,</span>
        <span class="token comment">// 优先执行</span>
        enforce<span class="token operator">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          fix<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token operator">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          presets<span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>
              <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
              <span class="token punctuation">{</span>
                useBuiltIns<span class="token operator">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
                corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
                  version<span class="token operator">:</span> <span class="token number">3</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                targets<span class="token operator">:</span> <span class="token punctuation">{</span>
                  chrome<span class="token operator">:</span> <span class="token string">'60'</span><span class="token punctuation">,</span>
                  firefox<span class="token operator">:</span> <span class="token string">'50'</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.(jpg|png|gif)/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          limit<span class="token operator">:</span> <span class="token number">8</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
          name<span class="token operator">:</span> <span class="token string">'[hash:10].[ext]'</span><span class="token punctuation">,</span>
          outputPath<span class="token operator">:</span> <span class="token string">'imgs'</span><span class="token punctuation">,</span>
          esModule<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">'html-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        exclude<span class="token operator">:</span> <span class="token regex">/\.(js|css|less|html|jpg|png|gif)/</span><span class="token punctuation">,</span>
        loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          outputPath<span class="token operator">:</span> <span class="token string">'media'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">'css/built.css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">OptimizeCssAssetsWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      template<span class="token operator">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
      minify<span class="token operator">:</span> <span class="token punctuation">{</span>
        collapseWhitespace<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  mode<span class="token operator">:</span> <span class="token string">'production'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次编辑于:</span> <span class="time">2020年8月3日 21:58</span></div></footer> <!----> <div class="comments-wrapper"><div class="valine-wrapper"><div id="valine"></div></div></div> <div class="footer-wrapper"><div class="media-links-wrapper"><div class="media-link"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon icon-instagram"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141C959.756315 772.203049 772.692466 959.266898 544.059897 959.266898z" fill="#181818"></path> <path d="M509.715712 393.059337c-65.754939 0-119.059433 53.304494-119.059434 119.059434s53.304494 119.059433 119.059434 119.059433 119.059433-53.304494 119.059433-119.059433S575.470651 393.059337 509.715712 393.059337zM509.715712 589.593102c-42.787144 0-77.474331-34.686163-77.474331-77.474331s34.686163-77.474331 77.474331-77.474331 77.474331 34.686163 77.474331 77.474331S552.50388 589.593102 509.715712 589.593102zM740.495369 411.102245c0-72.572992-57.189115-129.762107-129.762107-129.762107 0 0-51.329419-1.642312-101.016526-1.642312s-99.374214 1.642312-99.374214 1.642312c-72.572992 0-131.405443 58.832451-131.405443 131.405442 0 0-1.642312 46.455725-1.642312 94.447278 0 51.274129 1.642312 104.302174 1.642312 104.302175 0 72.572992 58.832451 131.405443 131.405443 131.405442 0 0 46.455725 1.642312 94.447278 1.642312 51.274129 0 105.944486-1.642312 105.944486-1.642312 72.572992 0 129.762107-57.189115 129.762106-129.762106 0 0 1.642312-52.43112 1.642312-102.659863C742.137681 461.34225 740.495369 411.102245 740.495369 411.102245zM698.955317 605.10394c0 59.510263-36.743149 96.253412-96.253412 96.253412 0 0-54.980594 1.347433-97.025421 1.347433-39.353032 0-87.302606-1.347433-87.302606-1.347433-59.509239 0-97.895724-38.387509-97.895724-97.895724 0 0-1.347433-53.338282-1.347433-95.383109 0-39.353032 1.347433-88.944918 1.347433-88.944918 0-59.510263 38.387509-96.253412 97.895724-96.253412 0 0 50.598365-1.347433 91.342858-1.347433 40.744493 0 92.98517 1.347433 92.985169 1.347433 59.510263 0 96.253412 36.743149 96.253412 96.253412 0 0 1.347433 51.348873 1.347433 91.637737C700.301726 551.959173 698.955317 605.10394 698.955317 605.10394zM634.472043 360.019582c-15.887629 0-28.768106 12.943958-28.768106 28.910426 0 15.966468 12.880477 28.909402 28.768106 28.909402 15.887629 0 28.767082-12.942934 28.767082-28.909402C663.239125 372.962516 650.359672 360.019582 634.472043 360.019582z" fill="#FFFFFF"></path></svg></div><div class="media-link"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141C959.756315 772.203049 772.692466 959.266898 544.059897 959.266898z" fill="#171515"></path> <path d="M510.25018 263.810197c-136.001664 0-246.287424 110.272449-246.287424 246.317117 0 108.810341 70.566177 201.127938 168.449614 233.700801 12.315293 2.258691 16.811173-5.344681 16.811173-11.87195 0-5.847409-0.212968-21.336746-0.332763-41.891244-68.513287 14.884221-82.969523-33.01723-82.969523-33.01723-11.199258-28.453773-27.346953-36.028477-27.346953-36.028477-22.362679-15.282512 1.691459-14.972275 1.691458-14.972275 24.717616 1.741629 37.727103 25.382117 37.727103 25.382117 21.971555 37.639048 57.645768 26.770506 71.681188 20.46542 2.238213-15.917321 8.600637-26.770506 15.6378-32.927128-54.692882-6.216008-112.191211-27.346953-112.191211-121.73075 0-26.888253 9.596877-48.875166 25.352425-66.092822-2.533092-6.231366-10.985266-31.273553 2.414322-65.183612 0 0 20.680436-6.62249 67.731038 25.249013 19.646312-5.463452 40.715824-8.195178 61.66247-8.2904 20.915929 0.095221 41.987489 2.827971 61.662469 8.2904 47.022957-31.872526 67.664486-25.249012 67.664486-25.249013 13.437471 33.910058 4.98325 58.952245 2.451181 65.183612 15.78524 17.217656 25.317612 39.203545 25.317613 66.092822 0 94.620315-57.587406 115.441023-112.457421 121.538259 8.844321 7.604396 16.721071 22.637081 16.721071 45.612044 0 32.927128-0.302046 59.492857-0.302046 67.56824 0 6.586654 4.436495 14.249412 16.936087 11.843282 97.787192-32.634297 168.295007-124.89046 168.295007-233.672133C756.569344 374.082647 646.281536 263.810197 510.25018 263.810197z" fill="#FFFFFF"></path></svg></div><div class="media-link"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon icon-gmail"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141C959.756315 772.203049 772.692466 959.266898 544.059897 959.266898z" fill="#DB4437"></path> <path d="M305.878574 312.986386h409.365735v387.916361H305.878574V312.986386z" fill="#E67C73"></path> <path d="M310.328379 312.986386h-9.35524c-22.818308 0-41.416161 19.167133-41.416161 42.807621V658.095125c0 23.640488 18.528229 42.807622 41.416161 42.807622h21.951077V420.55373l187.637225 149.370534 187.637225-149.370534v280.349017h21.951077c22.886909 0 41.416161-19.168157 41.416162-42.807622V355.794007c0-23.640488-18.574304-42.807622-41.416162-42.807621h-9.35524L510.561441 484.262947 310.328379 312.986386z" fill="#FFFFFF"></path></svg></div><div class="media-link"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon icon-qq"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141c-0.001024 228.633593-187.064873 415.697442-415.697442 415.697442z" fill="#5EAADE"></path> <path d="M729.459932 627.30075c-3.156638-39.628458-24.044923-83.747676-32.624058-105.910698l-22.084182-57.046794c-0.701361-23.73059 6.312253-78.322108-30.510759-146.611164s-110.820228-74.444654-124.497288-75.146016c-13.67706-0.701361-99.247252-1.402723-141.330987 72.944663-42.083735 74.347385-30.744205 148.812517-30.744205 148.812517l-23.523765 57.47785c-0.001024 0.002048-10.961716 26.222727-20.429584 58.135185-9.468891 31.913482-18.937783 82.063385-9.468892 92.233638 9.468891 10.170253 43.836626-46.643096 46.993265-51.902795 0 0 2.455277 27.179036 8.942615 41.382373l0.809893 1.776441 0.330715 0.722863 0.378837 0.826276 0.299999 0.652215 0.444366 0.960404 0.202729 0.435151a281.465052 281.465052 0 0 0 1.917738 4.024893l0.188394 0.386005c0.231398 0.473035 0.467916 0.953237 0.711601 1.442655l0.145391 0.291807c6.886653 13.807094 18.611164 33.823028 37.443487 50.420209l0.017406 0.015358-1.183612 0.387029c-10.666837 3.516022-31.69437 11.209497-40.624698 19.819348-1.717056 1.655623-2.987697 3.345033-3.650151 5.045707-5.376422 13.793783 4.208169 15.430976 20.574976 16.365783 16.365783 0.934807 94.922361 3.039916 132.563457-2.220807 0.407506-0.056314 0.787368-0.113651 1.171325-0.170989 2.710224 0.094197 5.32318 0.14232 7.828627 0.16075l0.151535 0.001024c0.83549 0.005119 1.66279 0.008191 2.474731 0.008191 0.496584 0 1.01467-0.002048 1.541971-0.006144l0.209896-0.001023a222.59267 222.59267 0 0 0 5.462429-0.106484c0.260067 0.037884 0.507847 0.075768 0.778152 0.113651 37.64212 5.260723 116.197674 3.156638 132.563457 2.220807 16.365783-0.934807 25.951397-2.572 20.573952-16.365783-4.301342-11.03646-34.17422-21.619339-45.956069-25.412834a141.388325 141.388325 0 0 0 7.958661-7.645351l0.236517-0.244709a142.494121 142.494121 0 0 0 2.531045-2.702033c42.433903-46.643096 38.927096-76.101301 40.681011-92.935 0 0 35.775577 51.552626 43.488506 53.306542 7.712928 1.753916 10.168205-6.311229 7.011566-45.940711z" fill="#FFFFFF"></path></svg></div><div class="media-link"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141C959.756315 772.203049 772.692466 959.266898 544.059897 959.266898z" fill="#2DC100"></path> <path d="M618.871102 424.812069c-52.6789 2.760395-98.49572 18.754507-135.696546 54.89766-37.587854 36.50356-54.743053 81.262707-50.047514 136.728622-20.586238-2.580191-39.34177-5.366183-58.19969-6.965492-6.552866-0.516038-14.292415 0.258019-19.786584 3.353224-18.316285 10.318716-35.858512 22.030941-56.703793 35.085479 3.818068-17.284208 6.294847-32.505287 10.680148-47.029101 3.173021-10.732366 1.702721-16.691379-8.152175-23.65687-63.256659-44.73355-89.905323-111.652647-69.963108-180.584703 18.470891-63.720479 63.798295-102.417201 125.376806-122.539619 84.100917-27.500536 178.52055 0.567232 229.651335 67.409538 18.733006 24.012159 30.112467 52.935895 32.763306 83.275665L618.871102 424.812069zM737.231222 753.7854c-16.691379-7.429312-31.989249-18.574304-48.241381-20.302622-16.252132-1.702721-33.330539 7.687331-50.305534 9.416673-51.724639 5.288368-98.0319-9.132033-136.263778-44.526725-72.646712-67.331723-62.275777-170.522981 21.799542-225.730878 74.736462-49.015438 184.324956-32.659894 237.003856 35.342474 45.971427 59.386373 40.55405 138.198922-15.55589 188.066232-16.252132 14.447022-22.108756 26.313853-11.686627 45.32638 1.909546 3.508855 2.140944 7.94535 3.250836 12.382869L737.231222 753.7854zM376.397651 403.348361c0.516038-12.640888-10.422129-23.991681-23.373254-24.353112-13.025869-0.533444-24.017278 9.593805-24.550722 22.619674-0.003072 0.078839-0.006143 0.158702-0.008191 0.237542-0.512967 12.869215 9.503704 23.719327 22.372918 24.232294 0.238565 0.009215 0.477131 0.015358 0.715696 0.017406C364.663926 426.584415 375.730078 416.448974 376.397651 403.348361zM502.909946 378.995249c-13.00232 0.258019-23.991681 11.350793-23.733662 23.99168 0.280545 13.104708 11.131681 23.50124 24.23639 23.220696 0.038908-0.001024 0.077815-0.002048 0.116723-0.003072 12.865119 0.104436 23.379398-10.239877 23.483834-23.104996 0.002048-0.278497 0-0.556994-0.008192-0.835491-0.109556-12.96546-10.708817-23.386565-23.673252-23.277009C503.191515 378.989105 503.050218 378.991153 502.909946 378.995249zM547.334283 569.640648c10.628954 0 19.348361-8.332379 19.760986-18.832323 0.384981-10.920761-8.15627-20.086582-19.077031-20.471563-0.176108-0.006143-0.352217-0.010239-0.529349-0.011262-11.041579 0.069624-19.937095 9.076743-19.867471 20.118322 0.001024 0.08703 0.002048 0.175084 0.003072 0.262115C528.092406 561.263219 536.764714 569.595597 547.334283 569.640648zM669.743869 530.351097c-10.452845 0.086006-19.011503 8.337498-19.477371 18.781128-0.570304 10.670933 7.617707 19.782488 18.28864 20.352793 0.310237 0.016382 0.620475 0.025597 0.930712 0.027645 10.654551 0 19.090342-8.07436 19.47737-18.703314 0.528325-10.772298-7.776409-19.934023-18.548706-20.462348-0.223207-0.011263-0.447438-0.01843-0.670645-0.021501V530.351097z" fill="#FFFFFF"></path></svg></div><div class="media-link"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon icon-facebook"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141C959.756315 772.203049 772.692466 959.266898 544.059897 959.266898z" fill="#3C599B"></path> <path d="M541.542163 743.516854h-96.560577V510.072024h-48.259811v-80.47841h48.259811v-48.290528c0-65.612619 27.246612-104.676916 104.630841-104.676916h64.441295v80.476363h-40.257123c-30.137041 0-32.140784 11.255571-32.140784 32.23191l-0.111604 40.259171h72.977427l-8.547395 80.47841h-64.430032V743.516854z" fill="#FFFFFF"></path></svg></div><div class="media-link"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" class="icon icon-twitter"><path d="M544.059897 959.266898h-64.949141c-228.633593 0-415.697442-187.063849-415.697442-415.697442v-64.949141c0-228.633593 187.063849-415.697442 415.697442-415.697442h64.949141c228.633593 0 415.697442 187.063849 415.697442 415.697442v64.949141C959.756315 772.203049 772.692466 959.266898 544.059897 959.266898z" fill="#5EAADE"></path> <path d="M749.736957 364.631161c-17.594445 7.805078-36.512775 13.088326-56.37103 15.458621 20.268834-12.147375 35.835986-31.387205 43.155743-54.311997-18.965428 11.256595-39.963268 19.422081-62.321852 23.821716-17.89342-19.082151-43.405571-30.99608-71.636137-30.996081-54.19937 0-98.136337 43.94311-98.136337 98.156815 0 7.694498 0.861088 15.190363 2.543331 22.372918-81.569872-4.09247-153.87563-43.174172-202.283904-102.558497-8.442958 14.498216-13.284912 31.356488-13.284912 49.348201 0 34.049306 17.326187 64.096245 43.656422 81.696834-16.086262-0.509895-31.221335-4.923865-44.446861-12.276385-0.010239 0.409554-0.010239 0.820132-0.010239 1.239925 0 47.557426 33.822004 87.22991 78.719375 96.248292-8.234086 2.242309-16.905371 3.448446-25.851057 3.448446-6.331707 0-12.475019-0.616379-18.465771-1.76825 12.48321 39.00184 48.725679 67.379845 91.672548 68.170285-33.582415 26.334331-75.897547 42.024349-121.884333 42.024349-7.923849 0-15.736094-0.460748-23.408066-1.370983 43.434239 27.844561 95.01451 44.104884 150.443566 44.104885 180.504839 0 279.220695-149.576335 279.220696-279.294415 0-4.262435-0.090102-8.494153-0.278497-12.707441C719.948038 401.602637 736.583103 384.322524 749.736957 364.631161z" fill="#FFFFFF"></path></svg></div></div> <div class="footer">要拿执着, 将命运的锁打破</div> <div class="copyright">Copyright © 2020-present Harry Xiong</div></div> </main></div><div class="global-ui"><!----><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.985acdd6.js" defer></script><script src="/assets/js/vendors~layout-Layout.6602fab5.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.325e3bb0.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout.90f03575.js" defer></script><script src="/assets/js/page-Webpack.7a03f5a7.js" defer></script>
  </body>
</html>

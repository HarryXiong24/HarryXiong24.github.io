(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{570:function(s,a,t){s.exports=t.p+"assets/img/git16.03d5b9de.png"},947:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"自定义-git"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义-git"}},[s._v("#")]),s._v(" 自定义 Git")]),s._v(" "),n("p",[s._v("在安装 Git 一节中，我们已经配置了"),n("code",[s._v("user.name")]),s._v("和"),n("code",[s._v("user.email")]),s._v("，实际上，Git 还有很多可配置项。")]),s._v(" "),n("p",[s._v("比如，让 Git 显示颜色，会让命令输出看起来更醒目:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global color.ui "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这样，Git 会适当地显示不同的颜色，比如"),n("code",[s._v("git status")]),s._v("命令，文件名就会标上颜色。")]),s._v(" "),n("h2",{attrs:{id:"忽略特殊文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#忽略特殊文件"}},[s._v("#")]),s._v(" 忽略特殊文件")]),s._v(" "),n("p",[s._v("有些时候，您必须把某些文件放到 Git 工作目录中，但又不能提交它们，比如保存了数据库密码的配置文件啦，等等，每次"),n("code",[s._v("git status")]),s._v("都会显示"),n("code",[s._v("Untracked files")]),s._v(" ...，有强迫症的童鞋心里肯定不爽。")]),s._v(" "),n("p",[s._v("好在 Git 考虑到了大家的感受，这个问题解决起来也很简单，在 Git 工作区的根目录下创建一个特殊的"),n("code",[s._v(".gitignore")]),s._v("文件，然后把要忽略的文件名填进去，Git 就会自动忽略这些文件。")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://git-scm.com/docs/gitignore",target:"_blank",rel:"noopener noreferrer"}},[s._v("gitignore 配置规则"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("忽略文件的原则是:")]),s._v(" "),n("p",[s._v("忽略操作系统自动生成的文件，比如缩略图等；\n忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如 Java 编译产生的"),n("code",[s._v(".class")]),s._v("文件；\n忽略您自己的带有敏感信息的配置文件，比如存放口令的配置文件。\n举个例子:")]),s._v(" "),n("p",[s._v("假设您在 Windows 下进行 Python 开发，Windows 会自动在有图片的目录下生成隐藏的缩略图文件，如果有自定义目录，目录下就会有"),n("code",[s._v("Desktop.ini")]),s._v("文件，因此您需要忽略 Windows 自动生成的垃圾文件:")]),s._v(" "),n("div",{staticClass:"language-md line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-md"}},[n("code",[n("span",{pre:!0,attrs:{class:"token title important"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("#")]),s._v(" Windows:")]),s._v("\n\nThumbs.db\nehthumbs.db\nDesktop.ini\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("然后，继续忽略 Python 编译产生的"),n("code",[s._v(".pyc")]),s._v("、"),n("code",[s._v(".pyo")]),s._v("、"),n("code",[s._v("dist")]),s._v("等文件或目录:")]),s._v(" "),n("div",{staticClass:"language-md line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-md"}},[n("code",[n("span",{pre:!0,attrs:{class:"token title important"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("#")]),s._v(" Python:")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v(".py[cod]\n")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")])]),s._v(".so\n"),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v(".egg\n")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")])]),s._v(".egg-info\ndist\nbuild\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("加上您自己定义的文件，最终得到一个完整的"),n("code",[s._v(".gitignore")]),s._v("文件，内容如下:")]),s._v(" "),n("div",{staticClass:"language-md line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-md"}},[n("code",[n("span",{pre:!0,attrs:{class:"token title important"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("#")]),s._v(" Windows:")]),s._v("\n\nThumbs.db\nehthumbs.db\nDesktop.ini\n\n"),n("span",{pre:!0,attrs:{class:"token title important"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("#")]),s._v(" Python:")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v(".py[cod]\n")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")])]),s._v(".so\n"),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v(".egg\n")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")])]),s._v(".egg-info\ndist\nbuild\n\n"),n("span",{pre:!0,attrs:{class:"token title important"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("#")]),s._v(" My configurations:")]),s._v("\n\ndb.ini\ndeploy"),n("span",{pre:!0,attrs:{class:"token italic"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")]),n("span",{pre:!0,attrs:{class:"token content"}},[s._v("key")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("_")])]),s._v("rsa\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("最后一步就是把.gitignore 也提交到 Git，就完成了！当然检验.gitignore 的标准是"),n("code",[s._v("git status")]),s._v("命令是不是说"),n("code",[s._v("working directory clean")]),s._v("。")]),s._v(" "),n("p",[s._v("使用 Windows 的童鞋注意了，如果您在资源管理器里新建一个"),n("code",[s._v(".gitignore")]),s._v("文件，它会非常弱智地提示您必须输入文件名，但是在文本编辑器里“保存”或者“另存为”就可以把文件保存为"),n("code",[s._v(".gitignore")]),s._v("了。")]),s._v(" "),n("p",[s._v("有些时候，您想添加一个文件到 Git，但发现添加不了，原因是这个文件被"),n("code",[s._v(".gitignore")]),s._v("忽略了:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" App.class\nThe following paths are ignored by one of your .gitignore files:\nApp.class\nUse -f "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you really want to "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" them.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("如果您确实想添加该文件，可以用"),n("code",[s._v("-f")]),s._v("强制添加到 Git:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -f App.class\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("或者您发现，可能是"),n("code",[s._v(".gitignore")]),s._v("写得有问题，需要找出来到底哪个规则写错了，可以用"),n("code",[s._v("git check-ignore")]),s._v("命令检查:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" check-ignore -v App.class\n.gitignore:3:*.class    App.class\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("Git 会告诉我们，"),n("code",[s._v(".gitignore")]),s._v("的第 3 行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。")]),s._v(" "),n("h3",{attrs:{id:"gitignore-小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gitignore-小结"}},[s._v("#")]),s._v(" gitignore 小结")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("忽略某些文件时，需要编写"),n("code",[s._v(".gitignore")]),s._v("；")])]),s._v(" "),n("li",[n("p",[n("code",[s._v(".gitignore")]),s._v("文件本身要放到版本库里，并且可以对"),n("code",[s._v(".gitignore")]),s._v("做版本管理！")])])]),s._v(" "),n("h2",{attrs:{id:"配置别名"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置别名"}},[s._v("#")]),s._v(" 配置别名")]),s._v(" "),n("p",[s._v("有没有经常敲错命令？比如"),n("code",[s._v("git status")]),s._v("？"),n("code",[s._v("status")]),s._v("这个单词真心不好记。")]),s._v(" "),n("p",[s._v("如果敲"),n("code",[s._v("git st")]),s._v("就表示"),n("code",[s._v("git status")]),s._v("那就简单多了，当然这种偷懒的办法我们是极力赞成的。")]),s._v(" "),n("p",[s._v("我们只需要敲一行命令，告诉 Git，以后"),n("code",[s._v("st")]),s._v("就表示"),n("code",[s._v("status")]),s._v(":")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global alias.st status\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("好了，现在敲"),n("code",[s._v("git st")]),s._v("看看效果。")]),s._v(" "),n("p",[s._v("当然还有别的命令可以简写，很多人都用"),n("code",[s._v("co")]),s._v("表示"),n("code",[s._v("checkout")]),s._v("，"),n("code",[s._v("ci")]),s._v("表示"),n("code",[s._v("commit")]),s._v("，"),n("code",[s._v("br")]),s._v("表示"),n("code",[s._v("branch")]),s._v(":")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global alias.co checkout\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global alias.ci commit\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global alias.br branch\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("以后提交就可以简写成:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" ci -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bala bala bala..."')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("code",[s._v("--global")]),s._v("参数是全局参数，也就是这些命令在这台电脑的所有 Git 仓库下都有用。")]),s._v(" "),n("p",[s._v("在撤销修改一节中，我们知道，命令"),n("code",[s._v("git reset HEAD file")]),s._v("可以把暂存区的修改撤销掉(unstage)，重新放回工作区。既然是一个"),n("code",[s._v("unstage")]),s._v("操作，就可以配置一个"),n("code",[s._v("unstage")]),s._v("别名:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global alias.unstage "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'reset HEAD'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("当您敲入命令:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" unstage test.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("实际上 Git 执行的是:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset HEAD test.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("配置一个"),n("code",[s._v("git last")]),s._v("，让其显示最后一次提交信息:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global alias.last "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'log -1'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这样，用"),n("code",[s._v("git last")]),s._v("就能显示最近一次的提交:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" last\ncommit adca45d317e6d8a4b23f9811c3d7b7f0f180bfe2\nMerge: bd6ae48 291bea8\nAuthor: Mr-Hope "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("zhangbowang1998@gmail.com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nDate:   Thu Aug "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(":49:22 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2013")]),s._v(" +0800\n\n    merge "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" fix hello.py\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("甚至还有人丧心病狂地把"),n("code",[s._v("lg")]),s._v("配置成了:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global alias.lg "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit\"")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("来看看"),n("code",[s._v("git lg")]),s._v("的效果:")]),s._v(" "),n("p",[n("img",{attrs:{src:t(570),alt:"示例图"}})]),s._v(" "),n("p",[s._v("为什么不早点告诉我？别激动，咱不是为了多记几个英文单词嘛！")]),s._v(" "),n("h2",{attrs:{id:"配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[s._v("#")]),s._v(" 配置文件")]),s._v(" "),n("p",[s._v("配置 Git 的时候，加上"),n("code",[s._v("--global")]),s._v("是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。")]),s._v(" "),n("p",[s._v("配置文件放哪了？每个仓库的 Git 配置文件都放在"),n("code",[s._v(".git/config")]),s._v("文件中:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .git/config\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("core"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    repositoryformatversion "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    filemode "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    bare "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n    logallrefupdates "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    ignorecase "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    precomposeunicode "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("remote "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"origin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    url "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" git@github.com:michaelliao/learngit.git\n    fetch "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" +refs/heads/*:refs/remotes/origin/*\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"master"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    remote "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" origin\n    merge "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" refs/heads/master\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("alias"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    last "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" log -1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("p",[s._v("别名就在"),n("code",[s._v("[alias]")]),s._v("后面，要删除别名，直接把对应的行删掉即可。")]),s._v(" "),n("p",[s._v("而当前用户的 Git 配置文件放在用户主目录下的一个隐藏文件"),n("code",[s._v(".gitconfig")]),s._v("中:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" .gitconfig\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("alias"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    co "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" checkout\n    ci "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" commit\n    br "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" branch\n    st "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" status\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("user"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    name "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Your Name\n    email "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" your@email.com\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("配置别名也可以直接修改这个文件，如果改错了，可以删掉文件重新通过命令配置。")]),s._v(" "),n("h3",{attrs:{id:"别名小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#别名小结"}},[s._v("#")]),s._v(" 别名小结")]),s._v(" "),n("ul",[n("li",[s._v("给 Git 配置好别名，就可以输入命令时偷个懒。我们鼓励偷懒。")])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"搭建-git-服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建-git-服务器"}},[s._v("#")]),s._v(" 搭建 Git 服务器")]),s._v(" "),n("p",[s._v("在远程仓库一节中，我们讲了远程仓库实际上和本地仓库没啥不同，纯粹为了 7x24 小时开机并交换大家的修改。")]),s._v(" "),n("p",[s._v("GitHub 就是一个免费托管开源代码的远程仓库。但是对于某些视源代码如生命的商业公司来说，既不想公开源代码，又舍不得给 GitHub 交保护费，那就只能自己搭建一台 Git 服务器作为私有仓库使用。")]),s._v(" "),n("p",[s._v("搭建 Git 服务器需要准备一台运行 Linux 的机器，强烈推荐用 Ubuntu 或 Debian，这样，通过几条简单的 apt 命令就可以完成安装。")]),s._v(" "),n("p",[s._v("假设您已经有 sudo 权限的用户账号，下面，正式开始安装。")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("第一步，安装 git:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("第二步，创建一个 git 用户，用来运行 git 服务:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" adduser "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("第三步，创建证书登录:")]),s._v(" "),n("p",[s._v("收集所有需要登录的用户的公钥，就是他们自己的"),n("code",[s._v("id_rsa.pub")]),s._v("文件，把所有公钥导入到"),n("code",[s._v("/home/git/.ssh/authorized_keys")]),s._v("文件里，一行一个。")])]),s._v(" "),n("li",[n("p",[s._v("第四步，初始化 Git 仓库:")]),s._v(" "),n("p",[s._v("先选定一个目录作为 Git 仓库，假定是/srv/sample.git，在/srv 目录下输入命令:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init --bare sample.git\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("Git 就会创建一个裸仓库，裸仓库没有工作区，因为服务器上的 Git 仓库纯粹是为了共享，所以不让用户直接登录到服务器上去改工作区，并且服务器上的 Git 仓库通常都以.git 结尾。然后，把 owner 改为 git:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R git:git sample.git\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("第五步，禁用 shell 登录:")]),s._v(" "),n("p",[s._v("出于安全考虑，第二步创建的 git 用户不允许登录 shell，这可以通过编辑"),n("code",[s._v("/etc/passwd")]),s._v("文件完成。找到类似下面的一行:")]),s._v(" "),n("div",{staticClass:"language-md line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-md"}},[n("code",[s._v("git:x:1001:1001:,,,:/home/git:/bin/bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("改为:")]),s._v(" "),n("div",{staticClass:"language-md line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-md"}},[n("code",[s._v("git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这样，git 用户可以正常通过 ssh 使用 git，但无法登录 shell，因为我们为 git 用户指定的 git-shell 每次一登录就自动退出。")])]),s._v(" "),n("li",[n("p",[s._v("第六步，克隆远程仓库:")]),s._v(" "),n("p",[s._v("现在，可以通过"),n("code",[s._v("git clone")]),s._v("命令克隆远程仓库了，在各自的电脑上运行:")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@server:/srv/sample.git\nCloning into "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'sample'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nwarning: You appear to have cloned an empty repository.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("剩下的推送就简单了。")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);
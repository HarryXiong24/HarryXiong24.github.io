import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{o as i,c as e,e as A}from"./app-b6b6271c.js";const a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAloAAACHCAMAAAD5ugcAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDM0MiwgMjAxMC8wMS8xMC0xODowNjo0MyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1OTFDRDk0RDA3MDUxMUUzOUI1M0U1OTA1QUU5NUQ0QyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1OTFDRDk0RTA3MDUxMUUzOUI1M0U1OTA1QUU5NUQ0QyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU5MUNEOTRCMDcwNTExRTM5QjUzRTU5MDVBRTk1RDRDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU5MUNEOTRDMDcwNTExRTM5QjUzRTU5MDVBRTk1RDRDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FEX97AAAAXRQTFRF////m7tZwFBN1VBN///IwFBu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",c="/assets/init-282c03b3.png",r="/assets/runlevel-ca5a7b3b.png",s={},l=A('<h1 id="linux-系统启动过程" tabindex="-1"><a class="header-anchor" href="#linux-系统启动过程" aria-hidden="true">#</a> Linux 系统启动过程</h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>本篇教程以 CentOS 为例介绍系统的启动过程。</p></div><p>Linux 启动时我们会看到许多启动信息。</p><p>Linux 系统的启动过程并不是大家想象中的那么复杂，其过程可以分为 5 个阶段:</p><ul><li>内核的引导。</li><li>运行 init。</li><li>系统初始化。</li><li>建立终端 。</li><li>用户登录系统。</li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>init 程序的类型:</p><ul><li>SysV: init, CentOS 5 之前, 配置文件: /etc/inittab。</li><li>Upstart: init,CentOS 6, 配置文件: /etc/inittab, /etc/init/*.conf。</li><li>Systemd: systemd, CentOS 7,配置文件: /usr/lib/systemd/system、 /etc/systemd/system。</li></ul></div><h2 id="内核引导" tabindex="-1"><a class="header-anchor" href="#内核引导" aria-hidden="true">#</a> 内核引导</h2><p>当计算机打开电源后，首先是 BIOS 开机自检，按照 BIOS 中设置的启动设备(通常是硬盘)来启动。</p><p>操作系统接管硬件以后，首先读入 <code>/boot</code> 目录下的内核文件。</p><p><img src="'+a+'" alt="boot" loading="lazy"></p><h2 id="运行-init" tabindex="-1"><a class="header-anchor" href="#运行-init" aria-hidden="true">#</a> 运行 init</h2><p>init 进程是系统所有进程的起点，您可以把它比拟成系统所有进程的老祖宗，没有这个进程，系统中任何进程都不会启动。</p><p>init 程序首先是需要读取配置文件 <code>/etc/inittab</code>。</p><p><img src="'+c+'" alt="init" loading="lazy"></p><h3 id="运行级别" tabindex="-1"><a class="header-anchor" href="#运行级别" aria-hidden="true">#</a> 运行级别</h3><p>许多程序需要开机启动。它们在 Windows 叫做&quot;服务&quot;(service)，在 Linux 就叫做&quot;守护进程&quot;(daemon)。</p><p>init 进程的一大任务，就是去运行这些开机启动的程序。</p><p>但是，不同的场合需要启动不同的程序，比如用作服务器时，需要启动 Apache，用作桌面就不需要。</p><p>Linux 允许为不同的场合，分配不同的开机启动程序，这就叫做&quot;运行级别&quot;(runlevel)。也就是说，启动时根据&quot;运行级别&quot;，确定要运行哪些程序。</p><p><img src="'+r+`" alt="runlevel" loading="lazy"></p><p>Linux 系统有 7 个运行级别(runlevel):</p><ul><li>运行级别 0: 系统停机状态，系统默认运行级别不能设为 0，否则不能正常启动</li><li>运行级别 1: 单用户工作状态，root 权限，用于系统维护，禁止远程登陆</li><li>运行级别 2: 多用户状态(没有 NFS)</li><li>运行级别 3: 完全的多用户状态(有 NFS)，登陆后进入控制台命令行模式</li><li>运行级别 4: 系统未使用，保留</li><li>运行级别 5: X11 控制台，登陆后进入图形 GUI 模式</li><li>运行级别 6: 系统正常关闭并重启，默认运行级别不能设为 6，否则不能正常启动</li></ul><h2 id="系统初始化" tabindex="-1"><a class="header-anchor" href="#系统初始化" aria-hidden="true">#</a> 系统初始化</h2><p>在 init 的配置文件中有这么一行: <code>si::sysinit:/etc/rc.d/rc.sysinit</code>　它调用执行了 <code>/etc/rc.d/rc.sysinit</code>，而 <code>rc.sysinit</code> 是一个 bash shell 的脚本，它主要是完成一些系统初始化的工作，rc.sysinit 是每一个运行级别都要首先运行的重要脚本。</p><p>它主要完成的工作有: 激活交换分区，检查磁盘，加载硬件模块以及其它一些需要优先执行任务。</p><div class="language-bash" data-ext="sh"><pre class="language-bash"><code>l5:5:wait:/etc/rc.d/rc <span class="token number">5</span>
</code></pre></div><p>这一行表示以 5 为参数运行 <code>/etc/rc.d/rc</code>，<code>/etc/rc.d/rc</code> 是一个 Shell 脚本，它接受 5 作为参数，去执行 <code>/etc/rc.d/rc5.d/</code> 目录下的所有的 rc 启动脚本，<code>/etc/rc.d/rc5.d/</code> 目录中的这些启动脚本实际上都是一些连接文件，而不是真正的 rc 启动脚本，真正的 rc 启动脚本实际上都是放在 <code>/etc/rc.d/init.d/</code>目录下。</p><p>而这些 rc 启动脚本有着类似的用法，它们一般能接受 start、stop、restart、status 等参数。</p><p><code>/etc/rc.d/rc5.d/</code> 中的 rc 启动脚本通常是 K 或 S 开头的连接文件，对于以 S 开头的启动脚本，将以 start 参数来运行。</p><p>而如果发现存在相应的脚本也存在 K 打头的连接，而且已经处于运行态了(以 <code>/var/lock/subsys/</code> 下的文件作为标志)，则将首先以 stop 为参数停止这些已经启动了的守护进程，然后再重新运行。</p><p>这样做是为了保证是当 init 改变运行级别时，所有相关的守护进程都将重启。</p><p>至于在每个运行级中将运行哪些守护进程，用户可以通过 chkconfig 或 setup 中的 &quot;System Services&quot; 来自行设定。</p>`,32),n=[l];function d(o,p){return i(),e("div",null,n)}const b=t(s,[["render",d],["__file","startup.html.vue"]]);export{b as default};
